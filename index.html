<html lang="en">
<!--copyright 2021 all rights reserved-->
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0; maximum-scale=1.0; user-scalable=0;">
    <meta http-equiv="X-UA-Compatible" content= "ie=edge">
    <title>UN 5.0</title>
    
    <!--
    <script
  src="https://code.jquery.com/ui/1.12.1/jquery-ui.min.js"
  integrity="sha256-VazP97ZCwtekAsvgPBSUwPFKdrwD3unUfSGVYrahUqU="
  crossorigin="anonymous"></script>
    <script
  src="https://code.jquery.com/jquery-3.6.0.min.js"
  integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4="
  crossorigin="anonymous"></script>   
-->
    
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.11.0/jquery.min.js"></script>
    
</head>
    
<style>
    :root {
        --pixel-size: 2px;
        --grid-cell: calc(var(--pixel-size)*16);
    }
    /*
    @media (max-width: 1400px) {
        :root {
            --pixel-size: 3px;
        }
    }
    @media (max-width: 1200px) {
        :root {
            --pixel-size: 2px;
        }
    }
    */
    
    @media (min-width: 1400px) {
        :root {
            --pixel-size: 3px;
        }
    }
    
    @font-face {
        font-family: "pixel";
        src: url("dogica.otf");
        /*
        src: url("/dogica.otf");*/
    }
    @font-face {
        font-family: "boldpixel";
        src: url("dogicabold.otf");
    }
    @font-face {
        font-family: "pixel2";
        src: url("pixel-inversions.ttf");
    }
    @font-face {
        font-family: "pixel3";
        src: url("Pixeled.ttf");
    }
    html, body {
        overflow: hidden;
        font-family: pixel;
        font-size: calc(var(--pixel-size)*3);
    }
    *:focus {outline:none !important}
    .splash {
        position: fixed;
        top: 0;
        left: 0;
        bottom: 0;
        right: 0;
        z-index: 20;
        background: #000;
    }
    .anim {
        position: fixed;
        width: calc(var(--grid-cell)*14);
        image-rendering: pixelated;
        background-image: url("lights/lights0.png");
        margin: auto;
        bottom: 0;
        left: 0;
        animation: hues 10s linear infinite;
        animation-delay: 5s;
        filter: hue-rotate(-30deg) brightness(1.5);
    }
    @keyframes hues {
        0% {
            filter: hue-rotate(-30deg) brightness(1.5);
        }
        40% {
            filter: hue-rotate(190deg) brightness(1);
        }
        100% {
            filter: hue-rotate(-30deg) brightness(1.5);
        }
    }
    #swipeme {
        position: fixed;
        background:orange;
        color:black;
        text-align:center;
        width: calc(var(--grid-cell)*10);
        height: calc(var(--grid-cell)*10);
        opacity: 0%;
}
    .cover {
        position: fixed;
        z-index: 11;
        width: calc(var(--grid-cell)*10);
        height: calc(var(--grid-cell)*10);
        border: #000 solid;
        border-width: calc(var(--grid-cell)*50);
        margin: calc(var(--grid-cell)*-50);
        pointer-events: none;
        transition: .1s;
    }
    .mapcover {
        position: fixed;
        z-index: 21;
        width: calc(var(--grid-cell)*12.2);
        height: calc(var(--grid-cell)*11.2);
        border: #000 solid;
        border-width: calc(var(--grid-cell)*48.5);
        margin: calc(var(--grid-cell)*-49);
        pointer-events: none;
        transition: .2s;
        padding: calc(var(--grid-cell)*5.5);
        background: transparent;
    }
    @keyframes shift {
        0% {
            opacity: 0%;
        } 
        70% {
            opacity: 100%;
        }
        100% {
            opacity: 0%;
        }
    }
    body {
        -webkit-tap-highlight-color: rgba(0,0,0,0);
        -webkit-tap-highlight-color: transparent;
        -webkit-touch-callout: none;
        touch-action: manipulation;
        -webkit-user-select: none;
        user-select: none;
        image-rendering: pixelated;
        display: flex;
        align-items: center;
        justify-content: center;
        background: #000;
        max-width: 100%;
        max-height: 100%;
    }
    body::-webkit-scrollbar { width: 0 !important; }
    .camera {
        pointer-events: none;
        overflow: hidden;
        
    }
    .shaded {
        position: fixed;
        z-index: 10;
        width: calc(var(--grid-cell)*10);
        height: calc(var(--grid-cell)*10);
        box-shadow: inset 0 0 calc(var(--grid-cell)*5) #000;
        pointer-events: none;
        box-shadow: inset 0 0 calc(var(--grid-cell)*.5) calc(var(--grid-cell)*.1) #000;
        mix-blend-mode: hard-light;
        transition: .1s steps(2);
        opacity: 50%;
    }
    .lens {
        position: relative;
        width: calc(var(--grid-cell)*10);
        height: calc(var(--grid-cell)*10);
        border: none;
        /*z-index: 5;*/
        pointer-events: none;
        overflow: hidden;
    }
    .grid {
        position: relative;
        z-index: 4;
        display: grid;
        width: calc(var(--grid-cell)*50);
        height: calc(var(--grid-cell)*50);
        grid-template-columns: 1fr 1fr 1fr 1fr 1fr;
        color: transparent;
        /*transition: .2s ease;*/
        top: 0;
        left: 0;
        overflow: hidden;
    }
    .square {
        border: calc(var(--pixel-size)*2) solid #000;
        aspect-ratio: 1;
        background-image: url("grass1.png");
        background-size: 100%;
        background-position: center;
        overflow: hidden;
    }
    .plus {
        position: absolute;
        width: calc(var(--grid-cell)*10);
        height: calc(var(--grid-cell)*10);
        border: none;
        z-index: 5;
        pointer-events: none;
        /*transition: .2s ease;*/
        background-image: url(grass1.png);
        background-size: 100%;
        overflow: visible; /*hidden*/
    }
    .layout {
        position: fixed;
        z-index: 11;
        display: grid;
        width: calc(var(--grid-cell)*2);
        height: calc(var(--grid-cell)*2);
        grid-template-columns: 1fr 1fr 1fr 1fr 1fr;
        color: transparent;
        bottom: calc(var(--grid-cell)*5);
        right: calc(var(--grid-cell)*5);
    }
    .main {
        overflow: hidden;
        display: none;
    }
    .icon {
        position: absolute;
        transform: translate(calc(var(--grid-cell)*4.5), calc(var(--grid-cell)*4.5));
        z-index: 10;
        width: calc(var(--grid-cell)*1);
        height: calc(var(--grid-cell)*1);
        background-image: url("sprite.png");
        background-size: 600%;
        filter: blur(0);
        /*box-shadow: inset 0 0 calc(var(--pixel-size)*5) #000;*/
        /*transition: .1s steps(3);*/
    }
    @keyframes collision {
        0% {
            left: calc(var(--pixel-size)*-1);
        }
        50% {
            left: calc(var(--pixel-size)*2);
        }
        100% {
            left: 0;
        }
    }
    .shadow {
        position: absolute;
        transform: translate(calc(var(--grid-cell)*4), calc(var(--grid-cell)*4));
        z-index: 6;
        width: calc(var(--grid-cell)*2);
        height: calc(var(--grid-cell)*2);
        background-image: url("req.png");
        background-size: 100%;
        opacity: 70%;
        transition: .05s steps(2);
    }
    .cords {
        z-index: 11;
        color: #fff;
        position: fixed;
        background: black;
        font-size: calc(var(--pixel-size)*2);
    }
    .start {
        margin-top: calc(var(--grid-cell)*-3);
        width: calc(var(--grid-cell)*5);
        height: calc(var(--grid-cell)*1);
        position: fixed;
        z-index: 21;
        font-family: boldpixel;
        font-size: calc(var(--pixel-size)*5);
        border: none;
        background: transparent;
        color: #fff;
        transition: .2s ease;
        border: rgb(0,0,0,0) solid 0px;
        opacity: 90%;
    }
    .start:hover {
        opacity: 100%;
        /*border: calc(var(--pixel-size)*1) solid #fff;*/
        text-shadow: 0 0 calc(var(--pixel-size)*5) #fff;
    }
    .start:hover:before {
        font-family: pixel;
        content: ">";
    }
    .story {
        width: calc(var(--grid-cell)*5);
        height: calc(var(--grid-cell)*1);
        position: fixed;
        z-index: 21;
        font-family: boldpixel;
        font-size: calc(var(--pixel-size)*5);
        border: none;
        background: transparent;
        color: #fff;
        transition: .2s ease;
        border: rgb(0,0,0,0) solid 0px;
        opacity: 90%;
    }
    .story:hover {
        opacity: 100%;
        text-shadow: 0 0 calc(var(--pixel-size)*5) #fff;
    }
    .story:hover:before {
        font-family: pixel;
        content: ">";
    }
    .intro {
        margin-top: calc(var(--grid-cell)*3);
        width: calc(var(--grid-cell)*5);
        height: calc(var(--grid-cell)*1);
        position: fixed;
        z-index: 21;
        font-family: boldpixel;
        font-size: calc(var(--pixel-size)*5);
        border: none;
        background: transparent;
        color: #fff;
        transition: .2s ease;
        border: rgb(0,0,0,0) solid 0px;
        opacity: 90%;
    }
    .intro:hover {
        opacity: 100%;
        text-shadow: 0 0 calc(var(--pixel-size)*5) #fff;
    }
    .intro:hover:before {
        font-family: pixel;
        content: ">";
    }
    .introdone {
        width: calc(var(--grid-cell)*1);
        height: calc(var(--grid-cell)*1);
        position: fixed;
        z-index: 21;
        font-family: boldpixel;
        font-size: calc(var(--pixel-size)*8);
        border: none;
        background: transparent;
        color: #fff;
        transition: .2s ease;
        animation: blinky 1s infinite;
        margin-left: calc(var(--pixel-size)*135);
    }
    @keyframes blinky {
        0% {
            opacity: 0%;
        }
        50% {
            opacity: 0%;
        }
        51% {
            opacity: 100%;
        }
        100% {
            opacity: 100%;
        }
    }
    @keyframes rcolorloop {
        0% {
            color: #8a7dff;
            text-shadow: 0 0 calc(var(--pixel-size)*3) #8a7dff;
        }
        20% {
            color: #ff40b9;
            text-shadow: 0 0 calc(var(--pixel-size)*3) #ff40b9;
        }
        40% {
            color: #ffba42;
            text-shadow: 0 0 calc(var(--pixel-size)*3)  #ffba42;
        }
        70% {
            color: #cfffb3;
            text-shadow: 0 0 calc(var(--pixel-size)*3) #cfffb3;
        }
        100% {
            color: #8a7dff;
            text-shadow: 0 0 calc(var(--pixel-size)*3) #8a7dff;
        }
    }
    .resize {
        font-family: boldpixel;
        font-size: calc(var(--pixel-size)*3);
        position: fixed;
        color: #fff;
        z-index: 21;
        text-align: center;
        width: 100%;
        top: calc(var(--grid-cell)*.4);
        left: 0;
        opacity: 0%;
        transition: 1s;
        overflow: hidden;
    }
    @keyframes alarm {
        0% {
            color: red;
        }
        50% {
            color: #fff;
        }
        100% {
            color: transparent;
        }
    }
    .reload {
        opacity: 0%;
        transition: 1s;
        color: #42f569;
    }
    .gear {
        position: fixed;
        width: calc(var(--grid-cell)*1);
        height: calc(var(--grid-cell)*1);
        top: calc(var(--grid-cell)*1);
        right: calc(var(--grid-cell)*1);
        background-image: url(gearfill.png);
        background-size: 100%;
        z-index: 14; /*22?*/
        opacity: 30%;
        border: none;
        background-color: transparent;
        transition: 1s ease;
    }
    .emit {
        position: absolute;
        transform: translate(calc(var(--grid-cell)*-.5), calc(var(--grid-cell)*-.8));
        mix-blend-mode: screen;
        z-index: 9;
        width: calc(var(--grid-cell)*2);
        height: calc(var(--grid-cell)*2);
        background-image: url("emit.png");
        background-size: 100%;
        opacity: 100%;
        animation: reglow 5s ease infinite;
        transition: .2s ease;
    }
    @keyframes reglow {
        0% {
            opacity: 80%;
        }
        35% {
            opacity: 100%;
        }
        50% {
            opacity: 70%;
        }
        65% {
            opacity: 90%;
        }
        100% {
            opacity: 80%;
        }
    }
    .blocker {
        position: fixed;
        bottom: calc(var(--grid-cell)*1);
        right: calc(var(--grid-cell)*1);
        z-index: 15;
        width: calc(var(--grid-cell)*3);
        height: calc(var(--grid-cell)*3);
        background: #000;
        border: #000 solid;
        border-width: calc(var(--grid-cell)*50);
        margin: calc(var(--grid-cell)*-50);
        opacity: 100%;
        display: block;
        transition: 2s steps(10);
    }
    .tutorial {
        position: fixed;
        z-index: 16;
        color: #fff;
        font-size: calc(var(--pixel-size)*3);
        display: block;
    }
    .helper {
        display: block;
    }
    @keyframes blocky {
        0% {
            opacity: 80%;
        }
        99% {
            opacity: 0%;
        }
        100% {
            opacity: 0%;
            display: none;
            pointer-events: none;
        }
    }
    .pointer {
        position: fixed;
        top: 0;
        bottom: 0;
        left: 0;
        right: 0;
        width: 100%;
        height: 100%;
        z-index: 60;
    }
    .champion {
        position: fixed;
        z-index: 20;
        width: calc(var(--grid-cell)*10);
        height: calc(var(--grid-cell)*10);
        border: #000 solid;
        border-width: 0;
        background: #000;
        text-shadow: 0 0 calc(var(--pixel-size)*2) rgb(255,255,255,0.5);
        transition: 1s ease;
    }
    @keyframes out {
        0%{
            opacity:100%;
        }
        100%{
            opacity:0%;
            transform: scale(.8) translateY(calc(var(--grid-cell)*30));
        }
    }
    .slide1 {
        font-size: calc(var(--pixel-size)*5);
        color: #fff;
        padding: calc(var(--pixel-size)*10);
        line-height: calc(var(--pixel-size)*7);
        opacity: 0%;
    }
    @keyframes slide1 {
        0% {
            opacity: 0%;
            transform: scale(.1);
        }
        100% {
            opacity: 100%;
            transform: scale(1);
        }
    }
    .ttype1 {
        font-size: calc(var(--pixel-size)*4);
        color: #fff;
        margin-left: calc(var(--pixel-size)*10);
        line-height: calc(var(--pixel-size)*6);
        white-space: nowrap;
        overflow: hidden;
        width: 0%;
        transition: 3s ease;
    }
    .ttype2 {
        font-size: calc(var(--pixel-size)*4);
        color: #fff;
        margin-left: calc(var(--pixel-size)*10);
        line-height: calc(var(--pixel-size)*6);
        white-space: nowrap;
        overflow: hidden;
        width: 0%;
        transition: 3s ease;
    }
    @keyframes typing {
        0% {
            width: 0%;
        }
        100% { 
            width: 100%;
        }
    }
    .copytag {
        color: #fff;
        z-index: 21;
        position: fixed;
        text-align: center;
        bottom: calc(var(--grid-cell)*.7);
        font-size: calc(var(--pixel-size)*3);
        opacity: 40%;
        text-shadow: 0 0 calc(var(--pixel-size)*3) #000;
    }
    .dmapshadow {
        top: calc(var(--grid-cell)*1);
        left: calc(var(--grid-cell)*1);
        width: calc(var(--grid-cell)*3);
        height: calc(var(--grid-cell)*3);
        border: transparent solid;
        border-width: calc(var(--grid-cell)*.1);
        position: fixed;
        z-index: 17;
        overflow: hidden;
        box-shadow: inset 0 0 calc(var(--grid-cell)*.5) calc(var(--grid-cell)*.4) #000;
        background: transparent;
    }
    .dmap {
        top: calc(var(--grid-cell)*1);
        left: calc(var(--grid-cell)*1);
        width: calc(var(--grid-cell)*3);
        height: calc(var(--grid-cell)*3);
        border: rgb(255,255,255, .2) solid;
        border-width: calc(var(--grid-cell)*.1);
        position: fixed;
        z-index: 16;
        overflow: hidden;
        background: rgb(0,0,0, .8);
    }
    .loc {
        position: relative;
        top: calc(var(--grid-cell)*1.4);
        left: calc(var(--grid-cell)*1.4);
    }
    .cmap {
        width: calc(var(--grid-cell)*.25);
        height: calc(var(--grid-cell)*.25);
        background: #707070;
        background-size: 1000%;
        /*border: #fff solid;
        border-width: calc(var(--grid-cell)*.05);*/
        position: fixed;
        z-index: 15;
        transition: .2s ease;
    }
    .minimapborder {
        width: calc(var(--grid-cell)*.25);
        height: calc(var(--grid-cell)*.25);
        background: transparent;
        border: rgb(255,255,255, .5) solid;
        border-width: calc(var(--grid-cell)*.05);
        position: fixed;
        z-index: 16;
        margin: calc(var(--grid-cell)*-.1);
        padding: calc(var(--grid-cell)*.05);
    }
    .minimapstarter {
        width: calc(var(--grid-cell)*.25);
        height: calc(var(--grid-cell)*.25);
        background: #fff;
        position: fixed;
        z-index: 16;
    }
    .mapper {
        top: calc(var(--grid-cell)*1);
        left: calc(var(--grid-cell)*1);
        width: calc(var(--grid-cell)*4);
        height: calc(var(--grid-cell)*4);
        position: fixed;
        background: #000;
        z-index: 18;
        border: #000 solid;
        border-width: calc(var(--grid-cell)*.1);
        opacity: 100%;
        transition: 1s ease;
    }
    .dmapshadow2 {
        width: calc(var(--grid-cell)*10);
        height: calc(var(--grid-cell)*10);
        border: transparent solid;
        border-width: calc(var(--grid-cell)*.1);
        position: fixed;
        z-index: 17;
        overflow: hidden;
        box-shadow: inset 0 0 calc(var(--grid-cell)*.5) calc(var(--grid-cell)*.4) #000;
        background: transparent;
        pointer-events: none;
    }
    .dmap2 {
        width: calc(var(--grid-cell)*12);
        height: calc(var(--grid-cell)*11);
        position: fixed;
        z-index: 22;
        overflow: hidden;
        background: transparent;
        pointer-events: none;
        /*transform: scale(1.1);*/
    }
    .dmap3 {
        width: calc(var(--grid-cell)*12);
        height: calc(var(--grid-cell)*11);
        border: #000 solid;
        box-shadow: inset 0 0 0 calc(var(--grid-cell)*.1) rgb(255,255,255,.2);
        border-width: calc(var(--grid-cell)*100);
        position: fixed;
        z-index: 23;
        overflow: hidden;
        background: transparent;
        pointer-events: none;
        display: none;
        /*transform: scale(1.1);*/
    }
    .loc2 {
        position: relative;
        top: calc(var(--grid-cell)*5);
        left: calc(var(--grid-cell)*5.6);
        pointer-events: none;
    }
    .cmap2 {
        width: calc(var(--grid-cell)*1);
        height: calc(var(--grid-cell)*1);
        background: #707070;
        background-size: 100%;
        /*border: #fff solid;
        border-width: calc(var(--grid-cell)*.05);*/
        position: fixed;
        z-index: 15;
        transition: .2s ease;
        pointer-events: none;
    }
    .minimapborder2 {
        width: calc(var(--grid-cell)*1);
        height: calc(var(--grid-cell)*1);
        background: transparent;
        border: rgb(255,255,255, .5) solid;
        border-width: calc(var(--grid-cell)*.05);
        position: fixed;
        z-index: 16;
        margin: calc(var(--grid-cell)*-.1);
        padding: calc(var(--grid-cell)*.05);
        pointer-events: none;
    }
    .minimapstarter2 {
        width: calc(var(--grid-cell)*1);
        height: calc(var(--grid-cell)*1);
        background-image: url(dungeon1.png);
        background-size: 100%;
        position: fixed;
        z-index: 16;
        pointer-events: none;
    }
    .mp {
        position: fixed;
        width: calc(var(--grid-cell)*3.2);
        height: calc(var(--grid-cell)*3.2);
        z-index: 18;
        background: transparent;
        top: calc(var(--grid-cell)*1);
        left: calc(var(--grid-cell)*1);
        border: none;
    }
    .mpreturn {
        position: fixed;
        width: calc(var(--grid-cell)*1);
        height: calc(var(--grid-cell)*1);
        z-index: 22;
        background-image: url(lb.png);
        background-size: 100%;
        background-color: transparent;
        top: calc(var(--grid-cell)*3);
        left: calc(var(--grid-cell)*3);
        border: none;
        display: none;
    }
    @keyframes upper {
        0% {
            top: calc(var(--grid-cell)*-10);
        }
        100% {
            top: 0;
        }
    }
    @keyframes downer {
        0% {
            top: calc(var(--grid-cell)*10);
        }
        100% {
            top: 0;
        }
    }
    @keyframes lefter {
        0% {
            left: calc(var(--grid-cell)*-10);
        }
        100% {
            left: 0;
        }
    }
    @keyframes righter {
        0% {
            left: calc(var(--grid-cell)*10);
        }
        100% {
            left: 0;
        }
    }
    .zoom {
        position: fixed;
        width: calc(var(--grid-cell)*1);
        height: calc(var(--grid-cell)*2);
        bottom: calc(var(--grid-cell)*2);
        background: #000;
        z-index: 25;
        border: none;
        background: transparent;
        color: rgb(255,255,255, .5);
        display: none;
        font-size: calc(var(--pixel-size)*8);
        font-family: pixel;
    }
    .mapback {
        position: fixed;
        background: rgb(0,0,0, 1);
        width: calc(var(--grid-cell)*12);
        height: calc(var(--grid-cell)*11);
        z-index: 19;
        display: none;
    }
    .search {
        position: fixed;
        z-index: 12;
        width: calc(var(--pixel-size)*9);
        height: calc(var(--pixel-size)*8);
        background-image: url(magempty.png);
        background-repeat: no-repeat;
        background-size: 100%;
        filter: blur(0);
        background-color: transparent;
        border: none;
        pointer-events: all;
        transition: .1s steps(2);
        display: none;
        opacity: 0%;
    }
    .fall {
        width: calc(var(--grid-cell)*1);
        height: calc(var(--grid-cell)*1);
        background-image: url(sprites.png);
        background-size: 1000%;
        background-repeat: no-repeat;
        background-position: calc(var(--grid-cell)*-5);
        z-index: 35;
        position: fixed;
        filter: blur(0);
        left: 50%;
        transform: translateX(-50%);
        margin-top: calc(var(--grid-cell)*-10);
        filter: brightness(0);
        display: none;
    }
    @keyframes fall {
        0% {
            margin-top: calc(var(--grid-cell)*-10);
            filter: brightness(0);
        }
        9.99% {
            background-position: calc(var(--grid-cell)*-5);
        }
        10% {
            filter: brightness(0);
            background-position: calc(var(--grid-cell)*-5);
        }
        20% {
            filter: brightness(0);
            background-position: calc(var(--grid-cell)*-5);
            margin-top: calc(var(--grid-cell)*-5);
        }
        40% {
            filter: brightness(.5);
            background-position: calc(var(--grid-cell)*-5);
            margin-top: calc(var(--grid-cell)*1);
        }
        40.1% {
            filter: brightness(.5);
            background-position: calc(var(--grid-cell)*-6);
            margin-top: calc(var(--grid-cell)*1);
        }
        50% {
            margin-top: calc(var(--grid-cell)*4.5);
            filter: brightness(.8);
            background-position: calc(var(--grid-cell)*-6);
        }
        50.1% {
            margin-top: calc(var(--grid-cell)*4.5);
            filter: brightness.(.8);
            background-position: calc(var(--grid-cell)*-7);
        }
        80% {
            margin-top: calc(var(--grid-cell)*4.5);
            filter: brightness(1);
            background-position: calc(var(--grid-cell)*-7);
        }
        80.1% {
            margin-top: calc(var(--grid-cell)*4.5);
            filter: brightness(1);
            background-position: calc(var(--grid-cell)*-8);
        }
        90% {
            margin-top: calc(var(--grid-cell)*4.5);
            filter: brightness(1);
            background-position: calc(var(--grid-cell)*-8);
        }
        90.1% {
            margin-top: calc(var(--grid-cell)*4.5);
            filter: brightness(1);
            background-position: calc(var(--grid-cell)*-9);
        }
        100% {
            margin-top: calc(var(--grid-cell)*4.5);
            filter: brightness(1);
            background-position: calc(var(--grid-cell)*-9);
        }
    }
    .warning {
        position: absolute;
        top: 20%;
        width: calc(var(--grid-cell)*10);
        height: calc(var(--grid-cell)*13);
        z-index: 40;
        background: linear-gradient(#262424,#661f27);
        text-align: center;
        padding: calc(var(--grid-cell)*1);
        font-size: calc(var(--pixel-size)*5);
        border: solid #ff3030;
        border-radius: calc(var(--grid-cell)*.5);
        border-width: calc(var(--grid-cell)*.1);
        color: #fff;
        text-shadow: 0 0 calc(var(--grid-cell)*.3) red;
        box-shadow: 0 0 calc(var(--grid-cell)*10) rgb(255, 0, 0, .5);
        display: none;
    }
    .warningbackground {
        position: fixed;
        top: 0;
        bottom: 0;
        left: 0;
        right: 0;
        z-index: 39;
        background: linear-gradient(#000,#800000,#000);
        display: none;
    }
    .bottomly {
        position: fixed;
        background: #000;
        opacity: 50%;
        width: calc(var(--grid-cell)*10);
        height: calc(var(--pixel-size)*4);
        z-index: 15;
        margin-top: calc(var(--grid-cell)*9.75);
    }
    .scrollbox {
        position: fixed;
        z-index: 20;
        width: calc(var(--grid-cell)*10);
        height: calc(var(--grid-cell)*10);
        background: transparent;
        border: none;
    }
</style> <!--style layout-->
    
<style>
    .css-selector {
        position: fixed;
        z-index: 13;
    background: linear-gradient(179deg, #b2e8ff, #fff9b4, #ff6e00, #ef34b1, #af42ff, #925fff, #5fff9b);
    background-size: 1400% 1400%;

    -webkit-animation: daynight 30s ease infinite;
    animation: daynight 30s ease infinite;
}

@-webkit-keyframes daynight {
    0%{background-position:47% 0%}
    50%{background-position:54% 100%}
    100%{background-position:47% 0%}
}
@keyframes daynight {
    0%{background-position:47% 0%}
    50%{background-position:54% 100%}
    100%{background-position:47% 0%}
}
    @keyframes daynigh {
        0% {
            animation: reglow 5s ease infinite
        }
        100% {
            animation: reglow 5s ease infinite
        }
    }
</style> <!--daynight-->
    
<style>
    .slidecontainer {
        position: fixed;
        z-index: 25;
        width: calc(var(--grid-cell)*7);
        display: none;
        bottom: calc(var(--grid-cell)*2.9);
}

.slider {
  -webkit-appearance: none;  /* Override default CSS styles */
  appearance: none;
  width: 100%; /* Full-width */
  height: calc(var(--grid-cell)*.1); /* Specified height */
  background: linear-gradient(90deg, #000, #424242, grey, #fff, grey, #424242, #000); /* Grey background */
  outline: none; /* Remove outline */
}


/* The slider handle (use -webkit- (Chrome, Opera, Safari, Edge) and -moz- (Firefox) to override default look) */
.slider::-webkit-slider-thumb {
  -webkit-appearance: none; /* Override default look */
  appearance: none;
  width: calc(var(--grid-cell)*.6); 
  height: calc(var(--grid-cell)*.6); 
  background-image: url(magnify.png);
 background-size: 100%;
    background-color: transparent;
    background-repeat: no-repeat;
    border: none;
}

.slider::-moz-range-thumb {
   width: calc(var(--grid-cell)*.6); 
  height: calc(var(--grid-cell)*.6); 
  background-image: url(magnify.png);
 background-size: 100%;
    background-color: transparent;
    background-repeat: no-repeat;
    border: none;
}
</style> <!--slider-->
   
<style>
    .settings {
        width: calc(var(--grid-cell)*10);
        height: calc(var(--grid-cell)*13);
        border: rgb(255,255,255, .2) solid;
        border-width: calc(var(--grid-cell)*.1);
        position: fixed;
        z-index: 26;
        overflow: hidden;
        background: rgb(0,0,0,1);
        margin-top: calc(var(--grid-cell)*-1);
    }
    .sub {
        width: calc(var(--grid-cell)*2);
        height: calc(var(--grid-cell)*1);
        color: #fff;
        font-family: pixel;
        font-size: calc(var(--pixel-size)*3.5);
        margin-right: calc(var(--pixel-size)*3);
        background:transparent;
        border: none;
    }
    .option1 {
        width: calc(var(--grid-cell)*2);
        height: calc(var(--grid-cell)*1);
        color: #fff;
        font-family: pixel;
        font-size: calc(var(--pixel-size)*3);
        background: #000;
        border: rgb(255,255,255, .2) solid;
        border-width: calc(var(--grid-cell)*.1);
    }
    .option2 {
        width: calc(var(--grid-cell)*2.5);
        height: calc(var(--grid-cell)*1);
        color: #fff;
        font-family: boldpixel;
        font-size: calc(var(--pixel-size)*3);
        background: #000;
        border: rgb(255,255,255, .4) solid;
        border-width: calc(var(--grid-cell)*.1);
        margin-left: calc(var(--grid-cell)*.1);
        margin-right: calc(var(--grid-cell)*.1);
    }
    .option3 {
        width: calc(var(--grid-cell)*4);
        height: calc(var(--grid-cell)*1);
        color: #fff;
        font-family: boldpixel;
        font-size: calc(var(--pixel-size)*3);
        background: #000;
        background-size: 100%;
        border: rgb(255,255,255, .2) solid;
        border-width: calc(var(--grid-cell)*.1);
    }
    .option4 {
        width: calc(var(--grid-cell)*2.875);
        height: calc(var(--grid-cell)*1);
        color: #fff;
        font-family: pixel;
        font-size: calc(var(--pixel-size)*3);
        background: #000;
        border: rgb(255,255,255, .2) solid;
        border-width: calc(var(--grid-cell)*.1);
    }
    .option5 {
        width: calc(var(--grid-cell)*8.75);
        height: calc(var(--grid-cell)*1);
        color: #fff;
        font-family: pixel;
        font-size: calc(var(--pixel-size)*3);
        background: #000;
        border: rgb(255,255,255, .2) solid;
        border-width: calc(var(--grid-cell)*.1);
    }
</style> <!--settings-->
<style>
    .fade {
        position: fixed;
        z-index: 30;
        background: #000;
        top: 0;
        bottom: 0;
        left: 0;
        right: 0;
        opacity: 0%;
        pointer-events: none;
        animation: none;
    }
    .vignette {
        position: fixed;
        width: calc(var(--grid-cell)*10);
        height: calc(var(--grid-cell)*10);
        overflow: hidden;
        z-index: 20;
        box-shadow: inset 0 0 calc(var(--grid-cell)*.4) calc(var(--grid-cell)*7) #000;
        pointer-events: none;
        overflow: hidden;
        animation-delay: 1s;
        opacity: 100%;
    }
    @keyframes scale {
        0% {
        box-shadow: inset 0 0 calc(var(--grid-cell)*.4) calc(var(--grid-cell)*5) #000;
        opacity: 100%;
        }
        12% {
        box-shadow: inset 0 0 calc(var(--grid-cell)*1.1) calc(var(--grid-cell)*3.8) #000;
        opacity: 100%;
        }
        33% {
        box-shadow: inset 0 0 calc(var(--grid-cell)*.8) calc(var(--grid-cell)*4.3) #000;
        opacity: 100%;
        }
        80% {
            opacity: 90%;
        }
        100% {
        box-shadow: inset 0 0 calc(var(--grid-cell)*6) calc(var(--grid-cell)*-2) #000;
        opacity: 0%;
        }
    }
    @keyframes fade {
        0% {
            opacity: 0%;
        }
        50% {
            opacity: 100%;
        }
        100% {
            opacity: 0%;
        }
    }
    .textbox {
        font-family: boldpixel;
        font-size: calc(var(--pixel-size)*4);
        position: fixed;
        left: 50%;
        transform: translateX(-50%);
        bottom: calc(var(--grid-cell)*-2);
        width: calc(var(--grid-cell)*12);
        height: calc(var(--grid-cell)*5);
        z-index: 16;
        color: #fff;
        border-width: calc(var(--pixel-size)*.3);
        border: solid #fff;
        background: rgb(0,0,0,.8);
        opacity: 0%;
        transition: .15s ease;
    }
    #type1, #type2, #type3 {
        white-space: nowrap;
        overflow: hidden;
        padding: calc(var(--pixel-size)*8);
    }
    @keyframes typing {
        0% {
            width: 0%;
        }
        100% {
            width: 100%;
        }
    }
</style> <!--fade and textbox-->  
<style>
    .loader,
    .loader:after {
        width: auto;
        height: auto;
        top: 0;
        bottom: 0;
        left: 0;
        right: 0;
        z-index: 999;
    }
    #loading {
        pointer-events: none;
        position:absolute;
        width: auto;
        height: auto;
        top: 0;
        bottom: 0;
        left: 0;
        right: 0;
        background-color:#000;
        z-index: 999;
}
</style> <!--loader-->
<style>
.dpad {
   position: fixed;
   margin: auto;
   z-index: 12; /*12*/
   background: radial-gradient(rgb(0,0,0,0), red);
   transition: 1s ease;
   transform: translate3d(calc(var(--grid-cell)*5),calc(var(--grid-cell)*-5), 0);
}
.dpad-button {
   appearance:none;
   outline:0;
   border:0;
   background:transparent;
   padding:0;
   cursor:pointer;
   opacity: 15%;
   transition: 1s ease;
}
.dpad-button.pressed { opacity: 90%; }

.dpad-up {
    position: absolute;
    top: calc(var(--pixel-size) * -100);
    left: 50%;
    width: calc(var(--grid-cell)*1);
    height: calc(var(--grid-cell)*1);
    background: url("ub.png") no-repeat;
    background-position: center;
    image-rendering: pixelated;
    background-size: 100%;
    transform: translateX(-50%);
    pointer-events: none;
}
.dpad-down {
    position: absolute;
    bottom: calc(var(--pixel-size) * -100);
    left: 50%;
    width: calc(var(--grid-cell)*1);
    height: calc(var(--grid-cell)*1);
    background: url("db.png") no-repeat;
    background-position: center;
    image-rendering: pixelated;
    background-size: 100%;
    transform: translateX(-50%);
    pointer-events: none;
}
.dpad-left {
    position: absolute;
    top: 50%;
    left: calc(var(--pixel-size) * -100);
    width: calc(var(--grid-cell)*1);
    height: calc(var(--grid-cell)*1);
    background: url("lb.png") no-repeat;
    background-position: center;
    image-rendering: pixelated;
    background-size: 100%;
    transform: translateY(-50%);
    pointer-events: none;
}
.dpad-right {
    position: absolute;
    top: 50%;
    right: calc(var(--pixel-size) * -100);
    width: calc(var(--grid-cell)*1);
    height: calc(var(--grid-cell)*1);
    background: url("rb.png") no-repeat;
    background-position: center;
    image-rendering: pixelated;
    background-size: 100%;
    transform: translateY(-50%);
    pointer-events: none;
}
.dpad {
   user-select:none;
}
</style> <!--dpad-->
<style>
    .joystick {
        position: fixed;
        bottom: calc(var(--grid-cell)*1);
        right: calc(var(--grid-cell)*1);
        z-index: 15;
        width: calc(var(--grid-cell)*3);
        height: calc(var(--grid-cell)*3);
        background: rgb(0,0,0,.8);
        display: flex;
        align-items: center;
        justify-content: center;
        /*
        border: solid #fff;
        border-width: calc(var(--grid-cell)*.1);
        */
    }
    .joyup {
        position: absolute;
        width: calc(var(--grid-cell)*1);
        height: calc(var(--grid-cell)*1);
        top: calc(var(--pixel-size)*1);
        background: url("ub.png") no-repeat;
        background-position: center;
        image-rendering: pixelated;
        background-size: 100%;
        border: none;
        opacity: 30%;
        transition: 1s ease;
    }
    .joyup:active {
        transition: .2s ease;
        opacity: 100%;
    }
    .joydown {
        position: absolute;
        width: calc(var(--grid-cell)*1);
        height: calc(var(--grid-cell)*1);
        bottom: 0;
        background: url("db.png") no-repeat;
        background-position: center;
        image-rendering: pixelated;
        background-size: 100%;
        border: none;
        opacity: 30%;
        transition: 1s ease;
    }
    .joydown:active {
        transition: .2s ease;
        opacity: 100%;
    }
    .joyleft {
        position: absolute;
        left: 0;
        width: calc(var(--grid-cell)*1);
        height: calc(var(--grid-cell)*1);
        background: url("lb.png") no-repeat;
        background-position: center;
        image-rendering: pixelated;
        background-size: 100%;
        border: none;
        opacity: 30%;
        transition: 1s ease;
    }
    .joyleft:active {
        transition: .2s ease;
        opacity: 100%;
    }
    .joyright {
        position: absolute;
        right: 0;
        width: calc(var(--grid-cell)*1);
        height: calc(var(--grid-cell)*1);
        background: url("rb.png") no-repeat;
        background-position: center;
        image-rendering: pixelated;
        background-size: 100%;
        border: none;
        opacity: 30%;
        transition: 1s ease;
    }
    .joyright:active {
        transition: .2s ease;
        opacity: 100%;
    }
</style> <!--joystick-->
    
<body>
    
    <div class="warning" id="firefox1">
        <p style="margin-bottom:calc(var(--grid-cell)*2);font-family:boldpixel;font-size: calc(var(--pixel-size)*10);color:#fc6060;">Caution</p>
        <p>Mozilla Firefox among other</p>
        <p>browsers are still awaiting</p>
        <p>compatability updates.</p>
        <div style="margin-bottom:calc(var(--grid-cell)*2)";></div>
        
        <p>This pages performance is</p>
        <p>optimized for Chrome and</p>
        <p>Safari browsers only.</p>
        
        <div style="margin-bottom:calc(var(--grid-cell)*3)";></div>
        
        <p>Currently unavailable</p>
        <p>As of 5.27.21</p>
    </div>
    <div class="warningbackground" id="firefox2"></div>
    
    <div class="fade" id="fade"></div>
    <div class="vignette" id="vignette"></div>
    
    
    <!--survival campaign controls-->
    
    <button class="story" id="storymode" style="font-family: pixel3;font-size: calc(var(--pixel-size)*6);">Settings</button>
    <button class="start" id="start" style="font-family: pixel3;font-size: calc(var(--pixel-size)*6);">New Game</button>
    <button class="intro" id="intro" style="font-family: pixel3;font-size: calc(var(--pixel-size)*6);">Controls</button>
    
    <p class="copytag" id="copy">Beta Version 2.1.0 &copy; 2021 ARR</p>
    
    <div class="splash" id="splash">
    <img class="anim"/>
    <img class="anim" style="left:calc(var(--grid-cell)*14);">
    <img class="anim" style="left:calc(var(--grid-cell)*28);">
    <img class="anim" style="left:calc(var(--grid-cell)*42);">
    </div>
    
    
    <div class="main" id="main">
        
        <div class="resize" id="resize">
        <p>Resizing proportions ... Please wait</p>
        <p class="reload" id="reload">Applying changes...</p>
        </div>
        
        <div class="helper" id="helper">
            
        <div class="pointer" id="pointer"></div>
            
        <div class="champion" id="champion">
            
            <div style="padding-top:calc(var(--pixel-size)*10);">
            <p class="ttype1" id="ttype1">Traverse the world using the four</p>
            <p class="ttype2" id="ttype2">directional axis-control buttons...</p>
            <div style="padding-top:calc(var(--pixel-size)*10);">
            <p class="ttype1" id="ttype3">Seek new paths by passing through</p>
            <p class="ttype2" id="ttype4">the edges of the field of view...</p>
            </div>
            <div style="padding-top:calc(var(--pixel-size)*10);">
            <p class="ttype1" id="ttype5">You can adjust all settings from</p>
            <p class="ttype1" id="ttype6">the gear icon in the top right...</p>
            </div>
            <div style="padding-top:calc(var(--pixel-size)*10);">
            <p class="ttype1" id="ttype7">Discover <span style="animation: rcolorloop ease 2s infinite;">new regions</span> to explore</p>
            <p class="ttype1" id="ttype8">using the map in the top left...</p>
            </div>
            <button class="introdone" id="introdone">></button>
            </div>
        </div>
            
        <div class="blocker" id="blocker"></div>
            
        </div>
        <button class="gear" id="gear"></button>
        <div class="settings" id="settings">
            
        <p style="color: #fff; text-align: center; padding:calc(var(--grid-cell)*.1);font-family: pixel2;opacity: 30%;font-size:calc(var(--pixel-size)*5);">Options</p>
        <div style="padding: calc(var(--grid-cell)*.625);padding-top: 0;padding-bottom: calc(var(--grid-cell)*.25);">
        <button class="option5" id="quit" style="border-color: rgb(255,255,255,.6);font-size: calc(var(--pixel-size)*4)">Quit to Title</button>
        </div>
        <div style="padding: calc(var(--grid-cell)*.625);padding-top: 0;padding-bottom: calc(var(--grid-cell)*.25);">
        <button class="option2" id="fullscreen">Fullscreen</button>
        <button class="option2" id="set2">Restart</button>
        <button class="option2" id="set2">Refresh</button>
        </div>
        <div style="padding-left: calc(var(--grid-cell)*7.5);margin-bottom:calc(var(--grid-cell)*-1.15);"> 
        <button class="option1" id="scalerauto" >Auto</button> <!--default-->
        </div>
        <div style="padding: calc(var(--grid-cell)*.2);padding-left: calc(var(--grid-cell)*.5);"> <!--.625-->
        <button class="sub" id="set1" style="width:calc(var(--pixel-size)*60);font-size:calc(var(--pixel-size)*4);font-family: boldpixel;">Adjust Scale:</button>
        <button class="option1" id="scalerdown" style="height:20px;width:calc(var(--pixel-size)*20);border:none; font-size: calc(var(--pixel-size)*8);">-</button>
        <button class="option1" id="scalerup" style="height:20px;width:calc(var(--pixel-size)*20);border: none;font-size: calc(var(--pixel-size)*8);">+</button>
        </div>
        <div style="padding: calc(var(--grid-cell)*.1);padding-left: calc(var(--grid-cell)*.5);">

        <button class="option4" id="reducenoise">Reduce Noise</button>
        <button class="option4" id="nonebutton" style="width:calc(var(--grid-cell)*2);">Clear </button>
        <button class="option4" id="highbrightness" style="width:calc(var(--grid-cell)*3.7);">Raise Brightness</button>
        </div>
        <div style="padding: calc(var(--grid-cell)*.2);padding-left: calc(var(--grid-cell)*.5);">
        <button class="sub" id="set1" style="color: rgb(255,255,255,.6);font-family: boldpixel;font-size:calc(var(--pixel-size)*5);">GUI:<p style="font-family: pixel;line-height: calc(var(--pixel-size)*4);font-size:calc(var(--pixel-size)*3);color: rgb(255,255,255,.3);">Interface Dimension</p></button>
        <button class="option1" id="small" style="border-color: rgb(255,255,255, 1)">Small</button>
        <button class="option1" id="medium">Medium</button>
        <button class="option1" id="large">Large</button>
        </div>
        <div style="padding: calc(var(--grid-cell)*.1);padding-left: calc(var(--grid-cell)*.5);">
        <button class="sub" id="set1" style="color: rgb(255,255,255,.6);font-family: boldpixel;font-size:calc(var(--pixel-size)*5);">Loc:<p style="font-family: pixel;line-height: calc(var(--pixel-size)*4);font-size:calc(var(--pixel-size)*3);color: rgb(255,255,255,.3);">Controls Location</p></button>
        <button class="option1" id="l-control">Left</button>
        <button class="option1" id="c-control">Center</button>
        <button class="option1" id="r-control" style="border-color: rgb(255,255,255, 1)">Right</button>
        </div>
        <div style="padding: calc(var(--grid-cell)*.2);padding-left: calc(var(--grid-cell)*.85);">
        <button class="option3" id="hidecontrols">Hide Controls</button>
        <button class="option3" id="restoreoptions">Restore Options</button>
        </div>
        <div style="padding: calc(var(--grid-cell)*.1);padding-left: calc(var(--grid-cell)*.65);">
        <button class="option5" id="set2" style="font-family: boldpixel; font-size:calc(var(--pixel-size)*4);color: rgb(255,255,255,.4);">Report Bug</button>
        </div>
        </div> <!--big one-->
        
        <button class="mp" id="mp"></button>
        <button class="mpreturn" id="mpreturn"></button>
<!--
    <div id='swipeme'>
</div>
-->
        <button class="mapcover" id="mapcover"></button>
        
        <div class="cover" id="cover"></div>
        
    <div class="shaded" id="shaded"></div>
        
 <div class="cords" id="cords">hey</div> 
        
    <button class="scrollbox" id="scrollbox"></button>
        
<div class="lens">
<div class="camera">
        <div class="fall" id="fall">
        <div class="emit" id="emit2"></div>
        </div> 
        <div class="icon" id="icon">
            <div class="emit" id="emit"></div>
            <button class="search" id="search"></button>
        </div>
        <div class="shadow" id="shadow"></div>
    
    <div class="bottomly"></div>
    
    <div style="overflow: hidden;">
    <div class="plus" id="plus">
    <div class="plus" style="left: calc(var(--grid-cell)*-10)" id="plusleft"></div>
    <div class="plus" style="right: calc(var(--grid-cell)*-10)" id="plusright"></div>
    <div class="plus" style="top: calc(var(--grid-cell)*-10)" id="plustop"></div>
    <div class="plus" style="bottom: calc(var(--grid-cell)*-10)" id="plusbottom"></div>
    </div> 
    </div>
</div>      
      
    <div class="textbox" id="textbox">
        <p id="type1"></p>
        <p id="type2"></p>
        <p id="type3"></p>
        <button id="moveon" style="width:calc(var(--pixel-size)*20);height:calc(var(--pixel-size)*20); position:fixed;right: calc(var(--pixel-size)*8);bottom: calc(var(--pixel-size)*6);font-size: calc(var(--pixel-size)*12);font-family:boldpixel;background: transparent; border: none;color: #fff;z-index:16;pointer-events: all;">></button>
        </div>
        </div>
    
<div class="dpad" id="dpad" style="z-index: -10;">
        <div class="DemoDirectionUI flex-center">
            <button id="dpad-left" class="dpad-button dpad-left"></button>
            <button id="dpad-up" class="dpad-button dpad-up"></button>
            <button id="dpad-right" class="dpad-button dpad-right"></button>
            <button id="dpad-down" class="dpad-button dpad-down"></button>
        </div>
    </div>
        
    <div class="joystick" id="joystick">
        <button class="joyup" id="joyup"></button>
        <button class="joydown" id="joydown"></button>
        <button class="joyleft" id="joyleft"></button>
        <button class="joyright" id="joyright"></button>
    </div>
    </div>
    
    <div class="slidecontainer" id="zoomslider">
  <input type="range" min="1" max="100" value="50" class="slider" id="myRange">
        <p style="color:tranparent;" id="czoom"></p>
</div>
    <button class="zoom" id="zoomin" style="margin-left:calc(var(--grid-cell)*5);">+</button>
    <button class="zoom" id="zoomout" style="margin-left:calc(var(--grid-cell)*-5);">-</button>
    
    <div class="dmap3" id="dmap3"></div>
    <div class="dmapshadow2" id="dmapshadow2"></div>
    <div class="dmap2" id="dmap2">
        <div class="loc2" id="loc2">
        <div class="minimapstarter2" id="minimapstarter2"></div>
        <div class="minimapborder2" id="mmb2"></div>
    <div class="cmap2" id="dduplicater0"></div>  
        </div>
    </div>
    <div class="mapback" id="mapback"></div>
    
<div class="mapper" id="mapper"></div>
    <div class="dmapshadow" id="dmapshadow"></div>
    <div class="dmap" id="dmap">
        <div class="loc" id="loc">
        <div class="minimapstarter" id="minimapstarter"></div>
        <div class="minimapborder" id="mmb"></div>
    <div class="cmap" id="duplicater0"></div>  
        </div>
    </div>
</body>
 
<script>
var FIREFOX = /Firefox/i.test(navigator.userAgent);

if (FIREFOX) {
  document.getElementById("firefox1").style.display="block";
  document.getElementById("firefox2").style.display="block";
}
</script> <!--browsers-->
    
<script>
    
    var interact = "none";
    
    $('.scrollbox').click(function() {
    if (interact != "none") {
        $('.search').click();
    } else {
        return;
    }
    });

    
    window.setInterval(function() {
        
        if (interact == "cactus") {
            document.getElementById("type1").innerHTML = "Prickly...";
        } else {
            document.getElementById("type1").innerHTML = "";
        }
        
        if (interact != "none") {
            document.getElementById("search").style.display = "block";
            document.getElementById("search").style.pointerEvents = "all";
            setTimeout(function() {
            document.getElementById("search").style.opacity = "100%";
            document.getElementById("search").style.transform = "scale(1)";
            },100);
        } else {
            document.getElementById("search").style.opacity = "0%";
            document.getElementById("search").style.transform= "scale(.1)";
            document.getElementById("search").style.pointerEvents = "none";
        }
        if (facing == "down") {
            document.getElementById("search").style.marginTop = "calc(var(--grid-cell)*1.5)";
            document.getElementById("search").style.marginLeft = "0";
        }
        if (facing == "up") {
            document.getElementById("search").style.marginTop = "calc(var(--grid-cell)*-1)";
            document.getElementById("search").style.marginLeft = "0";
        }
        if (facing == "left") {
            document.getElementById("search").style.marginLeft = "calc(var(--grid-cell)*-1)";
            document.getElementById("search").style.marginTop = "0";
        }
        if (facing == "right") {
            document.getElementById("search").style.marginLeft = "calc(var(--grid-cell)*1.5)";
            document.getElementById("search").style.marginTop= "0";
        }
    },100);
    
    $('.search').click(function() {
        document.getElementById("textbox").style.bottom = "calc(var(--grid-cell)*2)";
        document.getElementById("textbox").style.opacity = "100%";
        document.getElementById("type1").style.animation = "typing 1s steps(20) forwards";
        document.getElementById("joystick").style.pointerEvents ="none";
        document.getElementById("joystick").style.opacity ="10%";
    });
    
    $('#moveon').click(function() {
        document.getElementById("textbox").style.bottom = "calc(var(--grid-cell)*-2)";
        document.getElementById("textbox").style.opacity = "0%";
        document.getElementById("type1").innerHTML = "";
        document.getElementById("type1").style.animation = "none";
        document.getElementById("joystick").style.pointerEvents ="all";
        document.getElementById("joystick").style.opacity ="100%";
    });
    
</script> <!--interactions-->
    
<script>
    var xaxis = 0;
    var yaxis = 0;
    
    var facing = "down";
    
    var blinking = 1;
    var quickblink = 0;
    
    let icon = document.getElementById("icon");
    var shadow = document.getElementById("shadow").style;
    
    
    window.setInterval(function() {
        if (blinking == 1) {
            quickblink = quickblink+1;
            if (quickblink == 3) {
                quickblink = 0;
                setTimeout(function() {
                icon.style.backgroundPosition = "80%";
            },500);
            setTimeout(function() {
                icon.style.backgroundPosition = "0%";
            },750);
            }
            icon.style.backgroundPosition = "80%";
            setTimeout(function() {
                icon.style.backgroundPosition = "0%";
            },250);
            
    }},5000); //blinking animation
    
    $('.joyup').click(function() {
        blinking = 0;
        facing = "up";
        yaxis = yaxis - 1;
        /*
        if (yaxis <= -4) {
        yaxis = -3;
    }*/
        if (yaxis <= -4) {
        $('.dpad-up').click();
    }
        icon.style.top = `calc(var(--grid-cell)*${yaxis})`;
        shadow.top = `calc(var(--grid-cell)*${yaxis})`;
        icon.style.backgroundPosition = "20%";
    });
    
    $('.joydown').click(function() {
        blinking = 1;
        facing = "down";
        yaxis = yaxis + 1;
        if (yaxis >= 4) {
        $('.dpad-down').click();
    }
        icon.style.top = `calc(var(--grid-cell)*${yaxis})`;
        shadow.top = `calc(var(--grid-cell)*${yaxis})`;
        icon.style.backgroundPosition = "0%";
    });
    
    $('.joyleft').click(function() {
        blinking = 0;
        facing = "left";
        xaxis = xaxis - 1;
        if (xaxis <= -4) {
        $('.dpad-left').click();
    }
        icon.style.left = `calc(var(--grid-cell)*${xaxis})`;
        shadow.left = `calc(var(--grid-cell)*${xaxis})`;
        icon.style.backgroundPosition = "40%";
    });
    
    $('.joyright').click(function() {
        blinking = 0;
        facing = "right";
        xaxis = xaxis + 1;
        if (xaxis >= 4) {
        $('.dpad-right').click();
    }
        icon.style.left = `calc(var(--grid-cell)*${xaxis})`;
        shadow.left = `calc(var(--grid-cell)*${xaxis})`;
        icon.style.backgroundPosition = "60%";
    });
    
    window.setInterval(function() {
    if (yaxis==0 && xaxis==-3){
        document.getElementById("dpad-left").style.opacity = "100%";
        document.getElementById("dpad-left").style.pointerEvents = "all";
    } else {
        document.getElementById("dpad-left").style.opacity = "15%";
        document.getElementById("dpad-left").style.pointerEvents = "none";
    }
        
    if (yaxis==0 && xaxis==3){
        document.getElementById("dpad-right").style.opacity = "100%";
        document.getElementById("dpad-right").style.pointerEvents = "all";
    } else {
        document.getElementById("dpad-right").style.opacity = "15%";
        document.getElementById("dpad-right").style.pointerEvents = "none";
    }
        
    if (yaxis==-3 && xaxis==0){
        document.getElementById("dpad-up").style.opacity = "100%";
        document.getElementById("dpad-up").style.pointerEvents = "all";
    } else {
        document.getElementById("dpad-up").style.opacity = "15%";
        document.getElementById("dpad-up").style.pointerEvents = "none";
    }
        
    if (yaxis==3 && xaxis==0){
        document.getElementById("dpad-down").style.opacity = "100%";
        document.getElementById("dpad-down").style.pointerEvents = "all";
    } else {
        document.getElementById("dpad-down").style.opacity = "15%";
        document.getElementById("dpad-down").style.pointerEvents = "none";
    }
    },200);
    
</script> <!--movement-->

<script>
    
    var antispam = 0;
        
    var inter = 0;
    

    
    $(function () {
        
    $(document).keydown(function(e) {
        if (inter === 1) {
        switch (e.which) {
            case 87: //w up key
                $("#joyup").trigger("click")
                break;
        }
            } else {
            return false;
        }
    });
     $(document).keydown(function(e) {
         if (inter === 1) {
        switch (e.which) {
            case 65: //a left key
                $("#joyleft").trigger("click")
                break;
        }
             } else {
            return false;
        }
    });
     $(document).keydown(function(e) {
         if (inter === 1) {
        switch (e.which) {
            case 68: //d right key
                $("#joyright").trigger("click")
                break;
        }
             } else {
            return false;
        }
    });
     $(document).keydown(function(e) {
         if (inter === 1) {
        switch (e.which) {
            case 83: //s down key
                $("#joydown").trigger("click")
                break;
        }
             } else {
            return false;
        }
    });
        /*
     $(document).keydown(function(e) {
        switch (e.which) {
            case 13: //enter key
            antispam = antispam + 1;
                if (antispam == 1) {
            if (yaxis==0 && xaxis==-3) {
                $("#dpad-left").trigger("click")
                break;
            } if (yaxis==0 && xaxis==3){
                $("#dpad-right").trigger("click")
                break;
            } if (yaxis==-3 && xaxis==0){
                $("#dpad-up").trigger("click")
                break;
            } if (yaxis==3 && xaxis==0){
                $("#dpad-down").trigger("click")
                break;
            }
        } else {
            setTimeout(function() {
                antispam = 0;
        },500);
        }
        }
    });
    */   
});
         
        
</script> <!--dekstop keyboard controls-->

<script>
    /*
    $(window).resize(function() {
        if (started == true) {
    document.getElementById("resize").style.opacity = "100%";
    document.getElementById("resize").style.animation = "alarm 2s ease infinite";
        setTimeout(function() {
    document.getElementById("reload").style.opacity = "100%";
        },4000);
        setTimeout(function() {
        location.reload();
        return false;
        },6000);
        }
});
*/
</script> <!--resize--> <!--temp disabled-->
    
<script>
    
    var slider = document.getElementById("myRange");
var output = document.getElementById("czoom");
    var zoomy;
output.innerHTML = slider.value; // Display the default slider value

// Update the current slider value (each time you drag the slider handle)
slider.oninput = function() {
  output.innerHTML = this.value;
    zoomy = this.value;
    document.getElementById("dmap2").style.transform = "scale(1."+zoomy+")";
    slider.style.filter = "blur(0)";
}

    var started = false;
    var opt = false;
    
    var j = 0;
    
    window.setInterval(function() {
        document.getElementById("gear").style.filter = "blur(0)";
        document.getElementById("icon").style.filter = "blur(0)";
        document.getElementById("plus").style.filter = "blur(0)";
        slider.style.filter = "blur(0)";
        document.getElementById("duplicater0").style.filter = "blur(0)";
        document.getElementById("duplicater" + i).style.filter = "blur(0)";
        document.getElementById("dduplicater0").style.filter = "blur(0)";
        document.getElementById("dduplicater" + j).style.filter = "blur(0)";
    },100);

    window.setInterval(function() {
        if ( opt == false) {
        document.getElementById("gear").style.opacity = "10%";
        document.getElementById("gear").style.backgroundImage = "url(gearfill.png)";
        }
    },10000);

    var zoom = 1;
    
    $('#zoomin').click(function() {
        zoom = zoom + .3;
        document.getElementById("dmap2").style.transform = "scale("+zoom+")";
    });
    
    $('#zoomout').click(function() {
        zoom = zoom - .3;
        document.getElementById("dmap2").style.transform = "scale("+zoom+")";
        if (zoom <= .1) {
            zoom = .1;
        }
    });
    
    $('.story').click(function() {
        
    });
    
    $('.start').click(function() {
        started = true;
        opt = false;
        document.getElementById("emit2").style.opacity = "0%";
        document.getElementById("fade").style.animation = "fade 1s forwards";
            document.getElementById("mapcover").style.opacity = "100%";
        setTimeout(function() {
        document.getElementById("mp").style.display = "none";
        document.getElementById("splash").style.display = "none";
        document.getElementById("start").style.display = "none";
        document.getElementById("intro").style.display = "none";
        document.getElementById("storymode").style.display = "none";
        document.getElementById("main").style.display = "block";
        document.getElementById("helper").style.display = "none";
         document.getElementById("helper").style.pointerEvents = "none";
        document.getElementById("copy").style.display = "none";
        document.getElementById("joystick").style.opacity = "100%";
        document.getElementById("joystick").style.pointerEvents = "none";
        document.getElementById("mapper").style.opacity = "0%";
        document.getElementById("mapper").style.display = "none";
        document.getElementById("gear").style.opacity = "30%";
        document.getElementById("fade").style.animation = "none";
        document.getElementById("gear").style.pointerEvents = "none";
        document.getElementById("gear").style.opacity= "0%";
        
        document.getElementById("emit2").style.animation = "none";
        document.getElementById("emit").style.animation = "none";
        document.getElementById("icon").style.display = "none";
        document.getElementById("fall").style.display = "block";
        document.getElementById("fall").style.animation = "fall 2s steps(10) forwards";
        document.getElementById("emit2").style.opacity = "80%";
        },500);
        
        setTimeout(function() {
            document.getElementById("vignette").style.animation = "scale 2.5s ease forwards";
            document.getElementById("mapcover").style.transition = ".5s ease";
        },1500);
        
        setTimeout(function() {
            document.getElementById("emit").style.opacity = "0%";
            document.getElementById("icon").style.display = "block";
            document.getElementById("mapcover").style.opacity = "0%";

        },3000);
        
        setTimeout(function() {
            document.getElementById("emit2").style.opacity = "0%";
            document.getElementById("emit").style.opacity = "auto";
            document.getElementById("fall").style.display = "none";
            document.getElementById("fall").style.animation = "none";
            document.getElementById("emit").style.animation = "reglow 5s ease infinite";
            

            document.getElementById("gear").style.opacity= "30%";
            document.getElementById("gear").style.pointerEvents = "all";
            document.getElementById("joystick").style.pointerEvents = "all";
            document.getElementById("mp").style.display = "block";
            inter = 1;
        },3500);
        
        
        setTimeout(function() {
            document.getElementById("gear").style.zIndex = "23";
        },1000);
    });
    
    $('.intro').click(function() {
        started = true;
        opt = true;
        document.getElementById("gear").style.zIndex = "14";
        document.getElementById("mp").style.display = "none";
        document.getElementById("joystick").style.opacity = "0%";
        document.getElementById("fade").style.animation = "fade 1s forwards";
        document.getElementById("pointer").style.display = "block";
        setTimeout(function() {
        document.getElementById("splash").style.display = "none";
        document.getElementById("start").style.display = "none";
        document.getElementById("storymode").style.display = "none";
        document.getElementById("intro").style.display = "none";
        document.getElementById("main").style.display = "block";
        document.getElementById("copy").style.display = "none";
        document.getElementById("introdone").style.display = "none";
        document.getElementById("vignette").style.animation = "scale 3s ease forwards";
        document.getElementById("helper").style.display = "block";
        document.getElementById("helper").style.pointerEvents = "all";
        document.getElementById("mapper").style.opacity = "100%";
        document.getElementById("mapper").style.display = "block";
        document.getElementById("gear").style.opacity = "0%";
        document.getElementById("gear").style.pointerEvents = "none";
        },500);
        setTimeout(function() {
        document.getElementById("champion").style.marginTop = "calc(var(--grid-cell)*2)";
        document.getElementById("ttype1").style.animation = "typing 1s steps(35) forwards";
        },1200);
        setTimeout(function() {
            document.getElementById("ttype2").style.animation = "typing 1s steps(35) forwards";
        },2000);
        setTimeout(function() {
            document.getElementById("joystick").style.animation = "slide1 1s steps(15) forwards";
            document.getElementById("joystick").style.pointerEvents = "none";
        },3000);
        setTimeout(function() {
            document.getElementById("champion").style.marginTop = "0";
            document.getElementById("ttype1").style.opacity = "30%";
            document.getElementById("ttype2").style.opacity = "30%";
            document.getElementById("ttype3").style.animation = "typing 1s steps(35) forwards";
        },6000);
        setTimeout(function() {
            document.getElementById("champion").style.borderWidth = "calc(var(--grid-cell)*.1)";
            document.getElementById("champion").style.borderColor = "#fff";
            document.getElementById("blocker").style.opacity = "0%";
            document.getElementById("ttype4").style.animation = "typing 1s steps(35) forwards";
        },6800);
        setTimeout(function() {
            document.getElementById("ttype3").style.opacity = "30%";
            document.getElementById("ttype4").style.opacity = "30%";
            document.getElementById("gear").style.backgroundImage = "url(gear.png)";
            document.getElementById("champion").style.borderColor = "rgb(255,255,255, .3)";
        },9000);
        setTimeout(function() {
            document.getElementById("ttype5").style.animation = "typing 1s steps(35) forwards";
            document.getElementById("gear").style.opacity = "90%";
            
        },10000);
        setTimeout(function() {
            document.getElementById("ttype6").style.animation = "typing 1s steps(35) forwards";
            document.getElementById("gear").style.opacity = "30%";
            document.getElementById("gear").style.backgroundImage = "url(gearfill.png)";
        },10800);
        setTimeout(function() {
            document.getElementById("ttype5").style.opacity = "30%";
            document.getElementById("ttype6").style.opacity = "30%";
        },13000);
        setTimeout(function() {
            document.getElementById("ttype7").style.animation = "typing 1s steps(35) forwards";
            document.getElementById("mapper").style.opacity = "0%";
        },14000);
        setTimeout(function() {
            document.getElementById("ttype8").style.animation = "typing 1s steps(35) forwards";
        },14800);
        setTimeout(function() {
        document.getElementById("fade").style.animation = "none";
        document.getElementById("introdone").style.display = "block";
        },15500);
        setTimeout(function() {
            document.getElementById("pointer").style.display = "none";
            //document.getElementById("champion").style.animation = "out 2s steps(40) forwards";
        },18000);
        /* setTimeout(function() {
            //document.getElementById("helper").style.display = "none"; //also catches pointer div
        },20000); */
        
        /*
        
        ocument.getElementById("fade").style.animation = "fade 1s forwards";
        setTimeout(function() {
        document.getElementById("splash").style.display = "none";
        document.getElementById("start").style.display = "none";
        document.getElementById("intro").style.display = "none";
        document.getElementById("main").style.display = "block";
        document.getElementById("vignette").style.animation = "scale 3s ease forwards";
        },500);
        setTimeout(function() {
        document.getElementById("tt1").style.animation = "slideright 1.5s ease forwards";
        },1500);
        setTimeout(function() {
        document.getElementById("tt2").style.animation = "appear 1s ease forwards";
        document.getElementById("tt3").style.animation = "appear 1s ease forwards";
        },2000);
        setTimeout(function() {
        document.getElementById("joyup").style.opacity = "100%";
        document.getElementById("joydown").style.opacity = "100%";
        document.getElementById("joyleft").style.opacity = "100%";
        document.getElementById("joyright").style.opacity = "100%";
        },3500);
        setTimeout(function() {
        document.getElementById("joyup").style.opacity = "30%";
        document.getElementById("joydown").style.opacity = "30%";
        document.getElementById("joyleft").style.opacity = "30%";
        document.getElementById("joyright").style.opacity = "30%";
        },5500);
        setTimeout(function() {
        document.getElementById("tt1").style.color = "transparent";
        document.getElementById("tt2").style.color = "transparent";
        document.getElementById("tt3").style.color = "transparent";
        },6000);
        setTimeout(function() {
        document.getElementById("tt4").style.animation = "slideright 1.5s ease forwards";
        document.getElementById("blocker").style.animation = "blocky 2s forwards";
        },6500);
        setTimeout(function() {
        document.getElementById("tt5").style.animation = "appear 1s ease forwards";
        document.getElementById("tt6").style.animation = "appear 1s ease forwards";
        },7000);
        setTimeout(function() {
        document.getElementById("dpad-up").style.opacity = "100%";
        document.getElementById("dpad-down").style.opacity = "100%";
        document.getElementById("dpad-left").style.opacity = "100%";
        document.getElementById("dpad-right").style.opacity = "100%";
        },8000);
        setTimeout(function() {
        document.getElementById("dpad-up").style.opacity = "15%";
        document.getElementById("dpad-down").style.opacity = "15%";
        document.getElementById("dpad-left").style.opacity = "15%";
        document.getElementById("dpad-right").style.opacity = "15%";
        },9500);
        setTimeout(function() {
        document.getElementById("tt4").style.color = "transparent";
        document.getElementById("tt5").style.color = "transparent";
        document.getElementById("tt6").style.color = "transparent";
        },11000);
        setTimeout(function() {
        document.getElementById("secondblock").style.opacity = "80%";
        document.getElementById("tt7").style.animation = "slideright 1.5s ease forwards";
        },12000);
        setTimeout(function() {
        document.getElementById("tt8").style.animation = "appear 1s ease forwards";       },12500);
        setTimeout(function() {
        document.getElementById("secondblock").style.opacity = "0%";
        document.getElementById("tt7").style.color = "transparent";
        document.getElementById("tt8").style.color = "transparent";
        },15000);
        setTimeout(function() {
        document.getElementById("secondblock").style.display = "none";
        document.getElementById("secondblock").style.pointerEvents = "none";
        document.getElementById("pointer").style.pointerEvents = "none";
        document.getElementById("pointer").style.display = "none";
        document.getElementById("helper").style.display = "none";
        },15500);
        */
    });
    
    $('.introdone').click(function() {
        started = false;
        inter = 0;
        document.getElementById("gear").style.zIndex = "14";
        document.getElementById("joystick").style.opacity = "0%";
        document.getElementById("mapper").style.opacity = "100%";
        document.getElementById("fade").style.animation = "fade 1s forwards";
        setTimeout(function() {
        document.getElementById("splash").style.display = "block";
        document.getElementById("start").style.display = "block";
        document.getElementById("intro").style.display = "block";
        document.getElementById("storymode").style.display = "block";
        document.getElementById("main").style.display = "none";
        document.getElementById("copy").style.display = "block";
        document.getElementById("helper").style.display = "none";
        document.getElementById("vignette").style.animation = "none";
            
        document.getElementById("champion").style.borderWidth = "0";
        document.getElementById("champion").style.borderColor = "#000";

        document.getElementById("ttype1").style.animation = "none";
        document.getElementById("ttype2").style.animation = "none";
        document.getElementById("ttype3").style.animation = "none";
        document.getElementById("ttype4").style.animation = "none";
        document.getElementById("ttype5").style.animation = "none";
        document.getElementById("ttype6").style.animation = "none";
        document.getElementById("ttype7").style.animation = "none";
        document.getElementById("ttype8").style.animation = "none";
        document.getElementById("gear").style.opacity = "0%";
        document.getElementById("gear").style.pointerEvents = "none";
        },500);
        setTimeout(function() {
        document.getElementById("fade").style.animation = "none";
        document.getElementById("ttype1").style.opacity = "100%";
        document.getElementById("ttype2").style.opacity = "100%";
        document.getElementById("ttype3").style.opacity = "100%";
        document.getElementById("ttype4").style.opacity = "100%";
        document.getElementById("ttype5").style.opacity = "100%";
        document.getElementById("ttype6").style.opacity = "100%";
        document.getElementById("ttype7").style.opacity = "100%";
        document.getElementById("ttype8").style.opacity = "100%";
        document.getElementById("blocker").style.opacity = "100%";
        document.getElementById("joystick").style.animation = "none";
        },1000);
    });
    
    $('.gear').click(function() {
        opt = true;
        document.getElementById("gear").style.pointerEvents = "none";
        document.getElementById("mapcover").style.pointerEvents = "all";
        document.getElementById("mapcover").style.opacity = "100%";
        document.getElementById("settings").style.display = "block";
        document.getElementById("gear").style.backgroundImage = "url(gear.png)";
        document.getElementById("gear").style.opacity = "100%";
        document.getElementById("textbox").style.display = "none";
    });
    
    $('#scalerup').click(function() {
        document.documentElement.style.setProperty('--pixel-size', `${pixelSize+.1}px`);
        pixelSize = pixelSize + .1;
    });
    
    $('#scalerdown').click(function() {
        document.documentElement.style.setProperty('--pixel-size', `${pixelSize-.1}px`);
        pixelSize = pixelSize - .1;
    });   
    $('#scalerauto').click(function() {
        document.documentElement.style.setProperty('--pixel-size', "2px");
        setTimeout(function() {
        pixelSize = parseInt(getComputedStyle(document.documentElement).getPropertyValue('--pixel-size'));
        },20);
    });
    var noise = 100;
    $('#reducenoise').click(function() {
        noise = noise - 10;
        document.getElementById('bg').style.opacity = noise + "%";
    });  
    $('#nonebutton').click(function() {
        noise = 100;
        brightness = 1;
        document.getElementById('bg').style.opacity = "100%";
        document.getElementById('plus').style.filter = "brightness(1)";
        document.getElementById('settings').style.filter = "brightness(1)";
    });
    var brightness = 1;
    $('#highbrightness').click(function() {
        brightness = brightness + .1;
        document.getElementById('plus').style.filter = "brightness("+brightness+")";
        document.getElementById('settings').style.filter = "brightness("+brightness+")";
    });
    $('#fullscreen').click(function() {
        openFullscreen();
});
    
    $('#small').click(function() {
        document.getElementById('small').style.borderColor = "rgb(255,255,255, 1)";
        document.getElementById('medium').style.borderColor = "rgb(255,255,255, .2)";
        document.getElementById('large').style.borderColor = "rgb(255,255,255, .2)";
        document.getElementById('joystick').style.width = "calc(var(--grid-cell)*3)";
        document.getElementById('joystick').style.height = "calc(var(--grid-cell)*3)";
});
    $('#medium').click(function() {
        document.getElementById('small').style.borderColor = "rgb(255,255,255, .2)";
        document.getElementById('medium').style.borderColor = "rgb(255,255,255, 1)";
        document.getElementById('large').style.borderColor = "rgb(255,255,255, .2)";
        document.getElementById('joystick').style.width = "calc(var(--grid-cell)*3.5)";
        document.getElementById('joystick').style.height = "calc(var(--grid-cell)*3.5)";
});
    $('#large').click(function() {
        document.getElementById('small').style.borderColor = "rgb(255,255,255, .2)";
        document.getElementById('medium').style.borderColor = "rgb(255,255,255, .2)";
        document.getElementById('large').style.borderColor = "rgb(255,255,255, 1)";
        document.getElementById('joystick').style.width = "calc(var(--grid-cell)*4)";
        document.getElementById('joystick').style.height = "calc(var(--grid-cell)*4)";
});
    
    $('#l-control').click(function() {
        document.getElementById('l-control').style.borderColor = "rgb(255,255,255, 1)";
        document.getElementById('c-control').style.borderColor = "rgb(255,255,255, .2)";
        document.getElementById('r-control').style.borderColor = "rgb(255,255,255, .2)";
        document.getElementById('joystick').style.right = "auto";
        document.getElementById('joystick').style.left = "calc(var(--grid-cell)*1)";
        document.getElementById('joystick').style.transform = "none";
});
    $('#r-control').click(function() {
        document.getElementById('r-control').style.borderColor = "rgb(255,255,255, 1)";
        document.getElementById('c-control').style.borderColor = "rgb(255,255,255, .2)";
        document.getElementById('l-control').style.borderColor = "rgb(255,255,255, .2)";
        document.getElementById('joystick').style.left = "auto";
        document.getElementById('joystick').style.right = "calc(var(--grid-cell)*1)";
        document.getElementById('joystick').style.transform = "none";
});
    $('#c-control').click(function() {
        document.getElementById('c-control').style.borderColor = "rgb(255,255,255, 1)";
        document.getElementById('r-control').style.borderColor = "rgb(255,255,255, .2)";
        document.getElementById('l-control').style.borderColor = "rgb(255,255,255, .2)";
        document.getElementById('joystick').style.left = "50%";
        document.getElementById('joystick').style.transform = "translateX(-50%)";
});
    $('#hidecontrols').click(function() {
        document.getElementById('hidecontrols').style.borderColor = "rgb(255,255,255, 1)";
        document.getElementById('joystick').style.pointerEvents = "none";
        document.getElementById('joystick').style.opacity = "0%";
});
    $('#restoreoptions').click(function() {
        document.getElementById('small').style.borderColor = "rgb(255,255,255, 1)";
        document.getElementById('medium').style.borderColor = "rgb(255,255,255, .2)";
        document.getElementById('large').style.borderColor = "rgb(255,255,255, .2)";
        document.getElementById('joystick').style.width = "calc(var(--grid-cell)*3)";
        document.getElementById('joystick').style.height = "calc(var(--grid-cell)*3)";
        document.getElementById('r-control').style.borderColor = "rgb(255,255,255, 1)";
        document.getElementById('c-control').style.borderColor = "rgb(255,255,255, .2)";
        document.getElementById('l-control').style.borderColor = "rgb(255,255,255, .2)";
        document.getElementById('joystick').style.left = "auto";
        document.getElementById('joystick').style.right = "calc(var(--grid-cell)*1)";
        document.getElementById('joystick').style.transform = "none";
        noise = 100;
        brightness = 1;
        document.getElementById('bg').style.opacity = "100%";
        document.getElementById('plus').style.filter = "brightness(1)";
        document.getElementById('settings').style.filter = "brightness(1)";
        document.getElementById('joystick').style.pointerEvents = "all";
        document.getElementById('joystick').style.opacity = "100%";
        document.getElementById('hidecontrols').style.borderColor = "rgb(255,255,255, .2)";
});
    
    $('#quit').click(function() {
        $('.mapcover').click();
        $('.introdone').click();
    });

    var elem = document.documentElement;
    
    function openFullscreen() {
  if (elem.requestFullscreen) {
    elem.requestFullscreen();
  } else if (elem.webkitRequestFullscreen) { /* Safari */
    elem.webkitRequestFullscreen();
  } else if (elem.msRequestFullscreen) { /* IE11 */
    elem.msRequestFullscreen();
  }
}

    document.getElementById("settings").style.display = "none";
    
    
    document.getElementById("mp").style.display = "block";
    document.getElementById("mpreturn").style.display = "none";
    document.getElementById("mapcover").style.opacity = "0%";
    document.getElementById("dmapshadow2").style.opacity = "0%";
    document.getElementById("dmap2").style.opacity = "0%";

    document.getElementById("loc2").style.opacity = "0%";
    document.getElementById("mmb2").style.opacity = "0%";
    document.getElementById("minimapstarter2").style.opacity = "0%";
    
    $('.mp').click(function() {
    document.getElementById("zoomslider").style.display = "block";
    document.getElementById("mapback").style.display = "block";
    document.getElementById("dmap3").style.display = "block";
    document.getElementById("zoomin").style.display = "block";
    document.getElementById("zoomout").style.display = "block";
    document.getElementById("mapcover").style.pointerEvents = "all";
    document.getElementById("mp").style.display = "none";
    document.getElementById("mapcover").style.opacity = "100%";
    document.getElementById("dmapshadow2").style.opacity = "100%";
    document.getElementById("dmap2").style.opacity = "100%";

    document.getElementById("loc2").style.opacity = "100%";
    document.getElementById("mmb2").style.opacity = "100%";
    document.getElementById("minimapstarter2").style.opacity = "100%";
    });
    
    $('.mapcover').click(function() {
        document.getElementById("textbox").style.display = "block";
        setTimeout(function() {
    document.getElementById("gear").style.backgroundImage = "url(gearfill.png)";
        },500);
        opt = false;
        document.getElementById("mapback").style.display = "none";
        document.getElementById("zoomslider").style.display = "none";
        document.getElementById("dmap3").style.display = "none";
        document.getElementById("zoomin").style.display = "none";
        document.getElementById("zoomout").style.display = "none";
        document.getElementById("gear").style.pointerEvents = "all";
    document.getElementById("gear").style.opacity = "30%";
    document.getElementById("settings").style.display = "none";
        
    document.getElementById("mapcover").style.pointerEvents = "none";
    document.getElementById("mp").style.display = "block";
    document.getElementById("mapcover").style.opacity = "0%";
    document.getElementById("dmapshadow2").style.opacity = "0%";
    document.getElementById("dmap2").style.opacity = "0%";

    document.getElementById("loc2").style.opacity = "0%";
    document.getElementById("mmb2").style.opacity = "0%";
    document.getElementById("minimapstarter2").style.opacity = "0%";
    }); //make mapcover
        
</script> <!--start button pause menu tutorial-->
  
<script>
    
const $element = $('.anim');
const imagePath = '/lights';
const totalFrames = 39;
const animationDuration = 2000;
const timePerFrame = animationDuration / totalFrames;
let timeWhenLastUpdate;
let timeFromLastUpdate;
let frameNumber = 0;

function step2(startTime) {

  if (!timeWhenLastUpdate) timeWhenLastUpdate = startTime;
  timeFromLastUpdate = startTime - timeWhenLastUpdate;

  if (timeFromLastUpdate > timePerFrame) {

    $element.attr('src', imagePath + `/lights${frameNumber}.png`);
    timeWhenLastUpdate = startTime;

    if (frameNumber >= totalFrames) {
      frameNumber = 1;
    } else {
      frameNumber = frameNumber + 1;
    }        
  }
  
  requestAnimationFrame(step2);
}

$(document).ready(() => {
  for (var i = 1; i < totalFrames + 1; i++) {
    $('body').append(`<div id="preload-image-${i}" style="background-image: url('${imagePath}/lights${i}.png');"></div>`);
  }
});

$(window).on('load', () => {
  requestAnimationFrame(step2);
});
</script> <!--main menu-->
    
<script>
    
    $('.dpad-right').click(function() {
        blinking = 0;
        myright();
        icon.style.backgroundPosition = "60%";
        xaxis = -3;
        icon.style.transition = ".1s ease";
        setTimeout(function() {
            icon.style.transition = "none";
         },100);
        icon.style.left = `calc(var(--grid-cell)*${xaxis})`;
        shadow.left = `calc(var(--grid-cell)*${xaxis})`;
    });
    
    $('.dpad-left').click(function() {
        blinking = 0;
        myleft();
        icon.style.backgroundPosition = "40%";
        xaxis = 3;
        icon.style.transition = ".1s ease";
        setTimeout(function() {
            icon.style.transition = "none";
         },100);
        icon.style.left = `calc(var(--grid-cell)*${xaxis})`;
        shadow.left = `calc(var(--grid-cell)*${xaxis})`;
    });
    
    $('.dpad-up').click(function() {
        blinking = 0;
        myup();
        icon.style.backgroundPosition = "20%";
        yaxis = 3;
        icon.style.transition = ".1s ease";
        setTimeout(function() {
            icon.style.transition = "none";
         },100);
        icon.style.top = `calc(var(--grid-cell)*${yaxis})`;
        shadow.top = `calc(var(--grid-cell)*${yaxis})`;
    });
    
    $('.dpad-down').click(function() {
        blinking = 1;
        mydown();
        icon.style.backgroundPosition = "0%";
        yaxis = -3;
        icon.style.transition = ".1s ease";
        setTimeout(function() {
            icon.style.transition = "none";
         },100);
        icon.style.top = `calc(var(--grid-cell)*${yaxis})`;
        shadow.top = `calc(var(--grid-cell)*${yaxis})`;
    });
    
    var msg = document.getElementById("textbox");
    var type1 = document.getElementById("type1");
    var type2 = document.getElementById("type2");
    var type3 = document.getElementById("type3");
    
    
    var x = 0;
    var y = 0;
    
    var xcord = 0;
    var ycord = 0;
    
/*
    function detectswipe(el,func) {
      swipe_det = new Object();
      swipe_det.sX = 0;
      swipe_det.sY = 0;
      swipe_det.eX = 0;
      swipe_det.eY = 0;
      var min_x = 20;  //min x swipe for horizontal swipe
      var max_x = 40;  //max x difference for vertical swipe
      var min_y = 20;  //min y swipe for vertical swipe
      var max_y = 40;  //max y difference for horizontal swipe
      var direc = "";
      ele = document.getElementById(el);
      ele.addEventListener('touchstart',function(e){
        var t = e.touches[0];
        swipe_det.sX = t.screenX; 
        swipe_det.sY = t.screenY;
      },false);
      ele.addEventListener('touchmove',function(e){
        e.preventDefault();
        var t = e.touches[0];
        swipe_det.eX = t.screenX; 
        swipe_det.eY = t.screenY;    
      },false);
      ele.addEventListener('touchend',function(e){
        //horizontal detection
        if ((((swipe_det.eX - min_x > swipe_det.sX) || (swipe_det.eX + min_x < swipe_det.sX)) && ((swipe_det.eY < swipe_det.sY + max_y) && (swipe_det.sY > swipe_det.eY - max_y)))) {
          if(swipe_det.eX > swipe_det.sX) direc = "r";
          else direc = "l";
        }
        //vertical detection
        if ((((swipe_det.eY - min_y > swipe_det.sY) || (swipe_det.eY + min_y < swipe_det.sY)) && ((swipe_det.eX < swipe_det.sX + max_x) && (swipe_det.sX > swipe_det.eX - max_x)))) {
          if(swipe_det.eY > swipe_det.sY) direc = "d";
          else direc = "u";
        }
    
        if (direc != "") {
          if(typeof func == 'function') func(el,direc);
        }
        direc = "";
      },false);  
    }
    
    */
    
    var pixelSize = parseInt(getComputedStyle(document.documentElement).getPropertyValue('--pixel-size'));
    
    //var map = document.getElementById("grid");
    var map = document.getElementById("plus");
        
    /*
    function myfunction(el,d) {
        
        //alert("you swiped on element with id '"+el+"' to "+d+" direction");
        if (d == "d")
        {
            ycord = ycord-1,
            icon.style.backgroundImage = "url('back.png')",
            y=y-160,
            map.style.top = "calc(var(--grid-cell)*-10)",
            setTimeout(function() {
            icon.style.backgroundImage = "url('icon.png')";
            map.style.top = "0";
        },500);
        } else if (d == "u")
        {
            ycord = ycord+1,
            icon.style.backgroundImage = "url('icon.png')",
            map.style.top = "calc(var(--grid-cell)*10)",
            y=y+160,
            setTimeout(function() {
            map.style.top = "0";
        },500);
        } else if (d == "r")
        {
            xcord = xcord-1,
            icon.style.backgroundImage = "url('left.png')",
            x=x-160,
            map.style.left = "calc(var(--grid-cell)*-10)",
            setTimeout(function() {
            icon.style.backgroundImage = "url('icon.png')";
                map.style.left = "0";
        },500);
        } else
        {
            xcord = xcord+1,
            icon.style.backgroundImage = "url('right.png')",
            x=x+160,
            map.style.left = "calc(var(--grid-cell)*10)",
            setTimeout(function() {
            icon.style.backgroundImage = "url('icon.png')";
               map.style.left= "0";
        },500);
        }
        
        

        
        map.style.transition = "none";
        
    }
    
    */

    
    //detectswipe('swipeme',myfunction);                    important
    
    window.setInterval(function() {
        document.getElementById("cords").innerHTML = "x: " +xcord+ " y: " +ycord+ " col: " + col + " rng: " + rng + " xa: " + xaxis + " ya: " + yaxis + " rooms: " + roomcount + " biome: " + "i:" + inter;
    },200);

    let col = 0;
    
</script> <!--swipes misc-->
    
<script>
    function myright(el,d) {
            xcord = xcord+1,
            x=x+160,
            setTimeout(function() {
                map.style.animation = "none";
        },100);
        
       
        map.style.animation = "righter .1s ease";
        document.getElementById("plusleft").style.backgroundImage = roomrn;
        
    }

    function myleft(el,d) {
            xcord = xcord-1,
            x=x-160,
                setTimeout(function() {
                    map.style.animation = "none";
                },100),

       map.style.animation = "lefter .1s ease";
        document.getElementById("plusright").style.backgroundImage = roomrn;
        
    }

    function myup(el,d) {
            ycord = ycord-1,
            y=y-160,
            setTimeout(function() {
                map.style.animation = "none";
        },100);
        
    
        map.style.animation = "upper .1s ease";
        document.getElementById("plusbottom").style.backgroundImage = roomrn;

        
        
        /*
        
        document.getElementById("shaded").style.boxShadow = "inset 0 calc(var(--grid-cell)*5) calc(var(--grid-cell)*1) calc(var(--grid-cell)*6) #000";
        
        setTimeout(function() {
            document.getElementById("shaded").style.boxShadow = "inset 0 0 calc(var(--grid-cell)*1) calc(var(--grid-cell)*1) #000";
            
        },100);*/
        
        
    }

    function mydown(el,d) {
            ycord = ycord+1,
            y=y+160,
        setTimeout(function() {
                map.style.animation = "none";
        },100);
       
        map.style.animation = "downer .1s ease";
        document.getElementById("plustop").style.backgroundImage = roomrn;

        
    }
</script> <!--animations-->

<script>
    
    /* BONUS! Dpad functionality for mouse and touch */
var isPressed = false;
const removePressedAll = () => {
   document.querySelectorAll(".dpad-button").forEach(d => {
      d.classList.remove("pressed")
   })
}
document.body.addEventListener("mousedown", () => {
   //console.log('mouse is down')
   isPressed = true;
})
document.body.addEventListener("mouseup", () => {
   //console.log('mouse is up')
   isPressed = false;
   held_directions = [];
   removePressedAll();
})
const handleDpadPress = (direction, click) => {   
   if (click) {
      isPressed = true;
   }
   held_directions = (isPressed) ? [direction] : []
   
   if (isPressed) {
      removePressedAll();
      document.querySelector(".dpad-"+direction).classList.add("pressed");
   }
}
//Bind a ton of events for the dpad
document.querySelector(".dpad-left").addEventListener("touchstart", (e) => handleDpadPress(directions.left, true));
document.querySelector(".dpad-up").addEventListener("touchstart", (e) => handleDpadPress(directions.up, true));
document.querySelector(".dpad-right").addEventListener("touchstart", (e) => handleDpadPress(directions.right, true));
document.querySelector(".dpad-down").addEventListener("touchstart", (e) => handleDpadPress(directions.down, true));

document.querySelector(".dpad-left").addEventListener("mousedown", (e) => handleDpadPress(directions.left, true));
document.querySelector(".dpad-up").addEventListener("mousedown", (e) => handleDpadPress(directions.up, true));
document.querySelector(".dpad-right").addEventListener("mousedown", (e) => handleDpadPress(directions.right, true));
document.querySelector(".dpad-down").addEventListener("mousedown", (e) => handleDpadPress(directions.down, true));

document.querySelector(".dpad-left").addEventListener("mouseover", (e) => handleDpadPress(directions.left));
document.querySelector(".dpad-up").addEventListener("mouseover", (e) => handleDpadPress(directions.up));
document.querySelector(".dpad-right").addEventListener("mouseover", (e) => handleDpadPress(directions.right));
document.querySelector(".dpad-down").addEventListener("mouseover", (e) => handleDpadPress(directions.down));
</script> <!--dpad compatability-->
    
<script>
    var biome = "dungeon";
    var i = 0;
    

    $('.dpad').click(function() {
        duplicate();
        document.getElementById("duplicater" + i).style.transform = `translate3d(calc(var(--pixel-size)*${xcord}*5),calc(var(--pixel-size)*${ycord}*5),0)`;
        document.getElementById("loc").style.transform = `translate3d(calc(var(--pixel-size)*${xcord}*-5),calc(var(--pixel-size)*${ycord}*-5),0)`;
        document.getElementById("mmb").style.transform = `translate3d(calc(var(--pixel-size)*${xcord}*5),calc(var(--pixel-size)*${ycord}*5),0)`;
        setTimeout(function() {
        document.getElementById("duplicater" + i).style.backgroundImage = roomrn;
        },20);
        /*
        if (biome == "desert") {
        document.getElementById("duplicater" + i).style.background = "#fae769";
        } else if (biome == "water") {
        document.getElementById("duplicater" + i).style.background = "#5ea1ff";
        } else if (biome == "lava") {
        document.getElementById("duplicater" + i).style.background = "#ff735e";
        } else if (biome == "dungeon") {
        document.getElementById("duplicater" + i).style.background = "#676180";
            setTimeout(function() {
             if (roomrn.includes("dungeon1")) {
                 document.getElementById("duplicater" + i).style.background = roomrn; //#a463ff
             }
            },20);
        }
        */
    });
    
    $('.dpad').click(function() {
        twinduplicate();
        document.getElementById("dduplicater" + j).style.transform = `translate3d(calc(var(--pixel-size)*${xcord}*16),calc(var(--pixel-size)*${ycord}*16),0)`;
        document.getElementById("loc2").style.transform = `translate3d(calc(var(--pixel-size)*${xcord}*-16),calc(var(--pixel-size)*${ycord}*-16),0)`;
        document.getElementById("mmb2").style.transform = `translate3d(calc(var(--pixel-size)*${xcord}*16),calc(var(--pixel-size)*${ycord}*16),0)`;
        setTimeout(function() {
        document.getElementById("dduplicater" + j).style.backgroundImage = roomrn;
        document.getElementById("dduplicater" + j).style.opacity= "100%";
        },100);
    });
    
function duplicate() {
    var original = document.getElementById('duplicater' + i);
    var clone = original.cloneNode(true); // "deep" clone
   clone.id = "duplicater" + ++i; // there can only be one element with an ID
    clone.onclick = duplicate; // event handlers are not cloned
    original.parentNode.appendChild(clone);
}
    
function twinduplicate() {
    var originaly = document.getElementById('dduplicater' + j);
    var cloney = originaly.cloneNode(true); // "deep" clone
   cloney.id = "dduplicater" + ++j; // there can only be one element with an ID
    cloney.onclick = twinduplicate; // event handlers are not cloned
    originaly.parentNode.appendChild(cloney);
}
    
</script> <!--map-->

<script>
    
    var backdrop = document.getElementsByClassName("square");
    
    var plus = document.getElementById("plus");
    
    var rngfive = (Math.round(Math.random() * 1)+5);
    var rng = Math.ceil(Math.random() * 1)*(Math.round(Math.random()) ? 1 : -1); //-1-1
    
    
    var vaseroom = 'url("dungeon2.png")';
    
    
    var baseroom = 'url("grass1.png")';
    var basetwo = 'url("grass2.png")';
    var basethree = 'url("grass3.png")';
    
    var mob1 = 'url("dungeon8.png")';
    
    var sea1 = 'url("coast.png")';
    
    var rooms = [vaseroom, baseroom, basetwo,basethree, mob1,sea1];
    
    var saved = ["0c0zurl(grass1.png)"];
    
    var index, value, result;
    
    var roomrn = 'url("grass1.png")';
    
    var roomcount = 0;
    
    function removeA(arr) {
    var what, a = arguments, L = a.length, ax;
    while (L > 1 && arr.length) {
        what = a[--L];
        while ((ax= arr.indexOf(what)) !== -1) {
            arr.splice(ax, 1);
        }
    }
    return arr;
}

    
    //dash to new room
    
    $('.dpad').click(function() {
        
    
        /*
        for (index = 0; index < saved.length; ++index) {
            value = saved[index];
            
            if (value.substring(0, 3) === (xcord + "c" + ycord)) {
            result = value;
            document.getElementById("cords").style.backgroundColor = "red";
            //break;
            } else {
            document.getElementById("plus").style.backgroundImage = 
                rooms[Math.floor(Math.random() * rooms.length)];
            saved.push(xcord + "c" + ycord);
            document.getElementById("cords").style.backgroundColor = "blue";
            }
        }
        
        */
        
        if (saved.find(a =>a.includes(xcord + "c" + ycord + "z"))) {
            //already been in this room
            document.getElementById("plus").style.backgroundImage = 
            saved.find(a =>a.includes(xcord + "c" + ycord + "z")).split("z").pop();
            
            document.getElementById("cords").style.backgroundColor = "red";
            
            roomrn = saved.find(a =>a.includes(xcord + "c" + ycord + "z")).split("z").pop();
            
        } else {
            //new room
            roomcount = roomcount + 1;
            
            randomer = rooms[Math.floor(Math.random() * rooms.length)];
            document.getElementById("plus").style.backgroundImage = randomer;
            
            saved.push(xcord + "c" + ycord + "z" + (document.getElementById("plus").style.backgroundImage));
            
            document.getElementById("cords").style.backgroundColor = "blue";
            
            roomrn = randomer;
            
            /*
            if (roomrn != baseroom) {
                removeA(rooms, roomrn);  //sets special rooms prevents re use
            }
            */
            
            if (roomrn.includes('grass')) {
                return;
            } else {
                removeA(rooms, roomrn);
            }
            
            
            if (roomrn.includes('coast.png')) {
                if (facing == "up") {
                temple();
            }
        }
    }


        
        consoler();
        /*
        console.log(rooms[Math.floor(Math.random() * rooms.length)]);
        console.log("room right now: " + roomrn);
        console.log(saved.find(a =>a.includes(xcord + "c" + ycord + "z")).split("z").pop());
        
        if (document.getElementById("plus").style.backgroundImage = "url(dungeon2.png)") {
            if (yaxis==2 && xaxis==0){
                if()
            }
        }*/    
    });
    

    
    //spawns desert temple
    function temple() {
        if (saved.find(a =>a.includes(xcord + "c" + (ycord-1) + "z")) || saved.find(a =>a.includes((xcord+1) + "c" +(ycord-2) + "z")) || saved.find(a =>a.includes((xcord-1) + "c" +(ycord-2) + "z")) || saved.find(a =>a.includes((xcord-1) + "c" +(ycord-1) + "z")) || saved.find(a =>a.includes((xcord-1) + "c" +(ycord+1) + "z")) || saved.find(a =>a.includes(xcord + "c" +(ycord-3) + "z"))
               ) {
                return;
            } else {
                saved.push(xcord + "c" + (ycord-1) + "z" + (document.getElementById("plus").style.backgroundImage));
                saved.push(xcord + "c" + (ycord-2) + "z" + (document.getElementById("plus").style.backgroundImage));
                saved.push((xcord+1) + "c" + (ycord-2) + "z" + (document.getElementById("plus").style.backgroundImage));
                saved.push((xcord-1) + "c" + (ycord-2) + "z" + (document.getElementById("plus").style.backgroundImage));
                saved.push((xcord+1) + "c" + (ycord-1) + "z" + (document.getElementById("plus").style.backgroundImage));
                saved.push((xcord-1) + "c" + (ycord-1) + "z" + (document.getElementById("plus").style.backgroundImage));
                saved.push(xcord + "c" + (ycord-3) + "z" + (document.getElementById("plus").style.backgroundImage));
                }
    }
        
    
    console.log('%c Copyright 2021 — All Rights Reserved', 'background: #ff3863; color: #fff; border-radius: 5%;');
    /*
    console.log('%c -> Experiencing Bugs? -> https://placeholder.ga', 'background: repeating-linear-gradient(30deg, rgba(0,0,0,1) 7%, rgba(255,132,28,1) 7%, rgba(255,212,43,1) 13%, rgba(0,0,0,1) 13%, rgba(0,0,0,1) 21%, rgba(255,212,43,1) 22%, rgba(255,212,43,1) 28%, rgba(0,0,0,1) 28%, rgba(0,0,0,1) 36%, rgba(255,236,58,1) 37%, rgba(255,212,43,1) 45%, rgba(0,0,0,1) 46%, rgba(0,0,0,1) 54%, rgba(255,212,43,1) 54%, rgba(255,212,43,1) 62%, rgba(0,0,0,1) 63%, rgba(0,0,0,1) 72%, rgba(255,212,43,1) 72%, rgba(255,212,43,1) 80%, rgba(0,0,0,1) 80%, rgba(0,0,0,1) 88%, rgba(255,212,43,1) 89%, rgba(255,132,28,1) 95%, rgba(0,0,0,1) 96%); color: #f6ffa3; text-shadow: 0 0 3px #000; border-radius: 5%;');
    */
    
    function consoler() {
        //console.clear();
        console.log('%c Current', 'background: #534e80; color: #988cff; border-radius: 5%;');
        console.log("Room source:: " + roomrn);
    }
    
    var walls = [""];
    var specs = [""];
    
    function detect() {
        if (facing == "down") {
                    yaxis = yaxis-1;
                }
                else if (facing == "up") {
                    yaxis = yaxis+1;
                }
                else if (facing == "left") {
                    xaxis = xaxis+1;
                }
                if (facing == "right") {
                    xaxis = xaxis-1;
                }
        icon.style.top = `calc(var(--grid-cell)*${yaxis})`;
                    shadow.top = `calc(var(--grid-cell)*${yaxis})`;
                icon.style.left = `calc(var(--grid-cell)*${xaxis})`;
                    shadow.left = `calc(var(--grid-cell)*${xaxis})`;
    }

    $('.joystick').click(function() {
        if (roomrn.includes('dungeon2')) {
            walls = ["0,2","-1,-3","0,-3","-1,0","-1,-1","-2,-1"];
            if ((walls.indexOf(xaxis + "," + yaxis))>-1){
                detect();
            }
            mage();
        }
        
        //if (roomrn.indexOf("dungeon3") >-1)
        if (roomrn.includes('dungeon3')) {
            walls = ["-2,0","-1,0","0,0","1,0","2,0","0,-1","0,-2","0,1","0,2"];
            if ((walls.indexOf(xaxis + "," + yaxis))>-1){
                detect();
            }
            mage();
        }
        
        if (roomrn.includes('dungeon8')) {
            walls = [rng+","+rng];
            if ((walls.indexOf(xaxis + "," + yaxis))>-1){
                detect();
            }
            mage();
        }
        
        if (roomrn.includes('coast')) {
            specs = ["2,-1"];
            if ((specs.indexOf((xaxis+1) + "," + yaxis))>-1){
                interact = "cactus";
                facing = "right";
            } else if ((specs.indexOf((xaxis-1) + "," + yaxis))>-1){
                interact = "cactus";
                facing = "left";
            } else if ((specs.indexOf(xaxis + "," + (yaxis+1)))>-1){
                interact = "cactus";
                facing = "down";
            } else if ((specs.indexOf(xaxis + "," + (yaxis-1)))>-1){
                interact = "cactus";
                facing = "up";
            } else {
                interact = "none"
            }
        }
        
        function mage() {
            if ((walls.indexOf(xaxis+1 + "," + yaxis))>-1){
                interact = "wall";
            facing = "right";
            } else {
                interact = "none";
            }
        }
    });
    
    /*
    window.onerror = function(error) {
    //$('.alert').fadeIn();
        document.getElementById("error").style.display = "block";
};
*/
    
    //biomes
    /*
    var leftbiome = (Math.round(Math.random() * 10)+1); //1-10
    
    window.setInterval(function biome() {
        if (xcord >= leftbiome) {
       rooms = [baseroom, vaseroom];
   } else {
       rooms = [baseroom];
   }
    },1000);
    */
    
</script> <!--procedural gen and collisions-->
    
<script>
    
$('body').append('<div style="" id="loading"><div class= "post"></div></div>');
$(window).on('load', function(){
  setTimeout(removeLoader, 500); //wait for page load PLUS two seconds.
});
function removeLoader(){
    $( "#loading" ).fadeOut(500, function() {
        $('html, body').css({overflow: 'hidden'});
      // fadeOut complete. Remove the loading div
      $('html, body').css({overflow: 'visible'});
      $( "#loading" ).remove(); //makes page more lightweight 
  });  
}
</script> <!--loader-->
    
<style>
    
    .bg {
  position: fixed;
  z-index: 999999;
  top: -50%;
  left: -50%;
  right: -50%;
  bottom: -50%;
  width: 200%;
  height: 200vh;
  background: transparent url('http://assets.iceable.com/img/noise-transparent.png') repeat 0 0;
  background-repeat: repeat;
  animation: bg-animation .2s infinite;
  opacity: 100%;
  visibility: visible;
        pointer-events: none;
}

@keyframes bg-animation {
    0% { transform: translate(0,0) }
    10% { transform: translate(-5%,-5%) }
    20% { transform: translate(-10%,5%) }
    30% { transform: translate(5%,-10%) }
    40% { transform: translate(-5%,15%) }
    50% { transform: translate(-10%,5%) }
    60% { transform: translate(15%,0) }
    70% { transform: translate(0,10%) }
    80% { transform: translate(-15%,0) }
    90% { transform: translate(10%,5%) }
    100% { transform: translate(5%,0) }
}
    
</style> <!--grain overlay-->

<div class="bg" id="bg">
</div>
    
</html>